{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport '../styles/header.scss';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport ProfileIcon from './svg/profile.js';\nimport SettingsIcon from './svg/settings.js';\nimport LogoutIcon from './svg/logout.js';\nimport NotifBell from './svg/NotifBell';\nimport { Badge } from 'antd';\nimport ToggleIcon from './svg/ToggleIcon';\n\nvar DropdownItem = function DropdownItem(props) {\n  return __jsx(\"div\", {\n    className: \"menuItem\",\n    onClick: props.onClick\n  }, __jsx(\"span\", {\n    className: \"icon-button\"\n  }, props.lefticon), props.children);\n};\n\nvar DropDown = function DropDown(_ref) {\n  var userid = _ref.userid,\n      count = _ref.count;\n\n  var handleLogout = function handleLogout() {\n    axios.get('/api/signout', {\n      withCredentials: true\n    }).then(function (res) {\n      return window.location.reload();\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"Dropdown\"\n  }, __jsx(DropdownItem, {\n    lefticon: __jsx(ProfileIcon, null)\n  }, __jsx(\"a\", {\n    href: \"/Profiles/\" + userid,\n    style: {\n      textDecoration: 'none'\n    }\n  }, \"Mon profile\")), __jsx(DropdownItem, {\n    lefticon: __jsx(Badge, {\n      count: count\n    }, __jsx(NotifBell, null))\n  }, __jsx(\"a\", {\n    href: \"/Notifications/\",\n    style: {\n      textDecoration: 'none'\n    }\n  }, \"Notifications\")), __jsx(DropdownItem, {\n    lefticon: __jsx(LogoutIcon, null),\n    onClick: handleLogout\n  }, \"Se d\\xE9connecter\"));\n}; // Componenet  -------------------------------------------------------------\n\n\nvar Header = function Header(_ref2) {\n  var active = _ref2.active,\n      setUserID = _ref2.setUserID;\n\n  var _useState = useState(null),\n      userId = _useState[0],\n      setToken = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      checkStatus = _useState3[0],\n      setCheckStatus = _useState3[1];\n\n  var _useState4 = useState(false),\n      opened = _useState4[0],\n      setOpen = _useState4[1];\n\n  var _useState5 = useState(),\n      data = _useState5[0],\n      setData = _useState5[1];\n\n  var count = data !== undefined && data !== null ? data.NotifView : '';\n  useEffect(function () {\n    axios.get('/api/profiles/myprofile', {\n      withCredentials: true\n    }).then(function (res) {\n      setData(res.data.profile);\n      setLoading(false);\n\n      if (setUserID !== undefined) {\n        setUserID(res.data.profile._id);\n      }\n\n      setToken(res.data.profile._id);\n    })[\"catch\"](function (err) {\n      setLoading(false);\n      setToken(null);\n      console.error(err);\n    });\n  }, []);\n\n  var handleClick = function handleClick() {\n    window.location.replace(\"/Auth/Signin\");\n  };\n\n  return __jsx(\"div\", {\n    className: \"Header_Container\"\n  }, __jsx(\"div\", {\n    className: \"NavSwitch\"\n  }, __jsx(\"label\", {\n    htmlFor: \"toggle\",\n    onClick: function onClick() {\n      return setCheckStatus(!checkStatus);\n    }\n  }, \" \", __jsx(ToggleIcon, null), \" \")), __jsx(\"div\", {\n    className: \"Header_Logo\"\n  }, __jsx(\"img\", {\n    src: \"../static/Icons/LOGO2017.png\",\n    height: \"30\",\n    onClick: function onClick() {\n      return window.location.assign(\"/\");\n    },\n    style: {\n      cursor: 'pointer'\n    }\n  })), __jsx(\"div\", {\n    className: checkStatus ? \"GridNav visible\" : \"GridNav\"\n  }, __jsx(\"ul\", null, __jsx(\"li\", {\n    className: active == \"acceuil\" ? \"active\" : \"link\"\n  }, __jsx(\"a\", {\n    href: \"/\"\n  }, \"Acceuil\")), __jsx(\"li\", {\n    className: active == \"propos\" ? \"active\" : \"link\"\n  }, __jsx(\"a\", {\n    href: \"/propos\"\n  }, \"A propos\")), __jsx(\"li\", {\n    className: active == \"temoignages\" ? \"active\" : \"link\"\n  }, __jsx(\"a\", {\n    href: \"/temoignages\"\n  }, \"Temoignages\")), __jsx(\"li\", {\n    className: active == \"contact\" ? \"active\" : \"link\"\n  }, __jsx(\"a\", {\n    href: \"/contact\"\n  }, \"Contact\")), __jsx(\"li\", {\n    className: active == \"questions\" ? \"active\" : \"link\"\n  }, __jsx(\"a\", {\n    href: \"/questions\"\n  }, \"Questions\"))), __jsx(\"div\", {\n    className: \"Header_Buttons\"\n  }, !loading && userId === null && __jsx(React.Fragment, null, __jsx(\"input\", {\n    className: \"Header_subscribe\",\n    type: \"button\",\n    value: \"S'inscrire\",\n    onClick: function onClick() {\n      return window.location.replace(\"/Auth/SignUp\");\n    }\n  }), __jsx(\"input\", {\n    className: \"Header_signin\",\n    type: \"button\",\n    value: \"Se connecter\",\n    onClick: handleClick\n  })), !loading && userId !== null && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"ProfileThumb\",\n    onClick: function onClick() {\n      return setOpen(!opened);\n    }\n  }, __jsx(\"div\", {\n    className: \"ProfileImg\"\n  }, __jsx(Badge, {\n    count: count\n  }, __jsx(\"img\", {\n    src: data.Usrimg\n  }))), data.type == \"Société\" && __jsx(\"span\", null, data.companyname), data.type == \"Client\" && __jsx(\"span\", null, data.nom, \" \", data.prenom)), opened && __jsx(React.Fragment, null, __jsx(DropDown, {\n    userid: userId,\n    count: count\n  }))))));\n};\n\nexport default Header;","map":null,"metadata":{},"sourceType":"module"}