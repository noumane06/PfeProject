{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Noumane agouzil\\\\Desktop\\\\Normane\\\\My projects\\\\PfeProject\\\\Front-End\\\\pages\\\\Profiles\\\\[_id].js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from '../../components/head';\nimport { useState, useEffect } from 'react';\nimport { Spin, Skeleton } from 'antd';\nimport jwt from 'jsonwebtoken';\nimport MyProfile from './Components/myProfile';\nimport PublicProfile from './Components/publicProfile';\n\nvar Profile = function Profile(_ref) {\n  _s();\n\n  var data = _ref.data;\n\n  // const profile = data.profile[0];\n  // const [userid,setData] = useState();\n  var _useState = useState(true),\n      loading = _useState[0],\n      setLoading = _useState[1]; // useEffect(()=>{\n  //     const token = window.localStorage.getItem(\"Tokens\");\n  //     jwt.verify(token,\"secret\",function (err , decoded) {\n  //         if (!err) {\n  //             setData(decoded.userId);\n  //             setLoading(false);\n  //         }else\n  //         {\n  //             console.log(err);\n  //             const location = \"/Auth/Signin/?ref=tokenexpired&location=\"+window.location.href;\n  //             window.location.replace(location);\n  //         }\n  //     });\n  // },[])\n\n\n  if (loading) {\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      title: \"Loading\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        marginTop: '-50px',\n        marginLeft: '-50px'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }\n    }, __jsx(Spin, {\n      size: \"large\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 21\n      }\n    })));\n  } else {\n    return __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }\n    });\n  }\n}; // export async function getStaticPaths(){\n//     const res = await fetch(\"http://localhost:9000/profiles/\");\n//     const data = await res.json();\n//     var paths = [];\n//     data.response.profiles.map(profile=>{\n//         paths.push({params : {\n//             _id : profile._id\n//         }})\n//     })\n//     return{\n//         paths ,\n//         fallback : false\n//     }\n// }\n// export async function getStaticProps({ params }){\n//     const url = \"http://localhost:9000/profiles/profile?userid=\"+params._id ;\n//     const res = await fetch(url);\n//     const data = await res.json();\n//     return{\n//        props : {\n//            data\n//        }\n//     }\n// }\n\n\n_s(Profile, \"PE/a08i2rGxVV3v80gINDVF922g=\");\n\n_c = Profile;\n\nProfile.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var url, res, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(ctx);\n            url = \"http://localhost:9000/profiles/profile?userid=\" + ctx.pathname;\n            _context.next = 4;\n            return fetch(url);\n\n          case 4:\n            res = _context.sent;\n            _context.next = 7;\n            return res.json();\n\n          case 7:\n            data = _context.sent;\n            return _context.abrupt(\"return\", {\n              props: {\n                data: data\n              }\n            });\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/Front-End/pages/Profiles/[_id].js"],"names":["Head","useState","useEffect","Spin","Skeleton","jwt","MyProfile","PublicProfile","Profile","data","loading","setLoading","position","top","left","marginTop","marginLeft","getInitialProps","ctx","console","log","url","pathname","fetch","res","json","props"],"mappings":";;;;;;;;;AAAA,OAAOA,IAAP,MAAiB,uBAAjB;AACA,SAAQC,QAAR,EAAmBC,SAAnB,QAAmC,OAAnC;AACA,SAAQC,IAAR,EAAeC,QAAf,QAA8B,MAA9B;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,OAAU;AAAA;;AAAA,MAARC,IAAQ,QAARA,IAAQ;;AAEtB;AAEA;AAJsB,kBAKOR,QAAQ,CAAC,IAAD,CALf;AAAA,MAKfS,OALe;AAAA,MAKPC,UALO,iBAOtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AACA,MAAID,OAAJ,EAAa;AAET,WACA,4BACQ,MAAC,IAAD;AAAM,MAAA,KAAK,EAAC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADR,EAEQ;AAAK,MAAA,KAAK,EAAE;AAACE,QAAAA,QAAQ,EAAG,OAAZ;AAAoBC,QAAAA,GAAG,EAAG,KAA1B;AAAgCC,QAAAA,IAAI,EAAC,KAArC;AAA2CC,QAAAA,SAAS,EAAE,OAAtD;AAA8DC,QAAAA,UAAU,EAAC;AAAzE,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,IAAD;AAAM,MAAA,IAAI,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFR,CADA;AAQH,GAVD,MAUK;AACD,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ;AAUH;AAEJ,CA7CD,C,CAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;GAzEMR,O;;KAAAA,O;;AA0ENA,OAAO,CAACS,eAAR;AAAA,uEAA0B,iBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtBC,YAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACMG,YAAAA,GAHgB,GAGV,mDAAiDH,GAAG,CAACI,QAH3C;AAAA;AAAA,mBAIJC,KAAK,CAACF,GAAD,CAJD;;AAAA;AAIhBG,YAAAA,GAJgB;AAAA;AAAA,mBAKHA,GAAG,CAACC,IAAJ,EALG;;AAAA;AAKhBhB,YAAAA,IALgB;AAAA,6CAMhB;AACHiB,cAAAA,KAAK,EAAG;AACJjB,gBAAAA,IAAI,EAAJA;AADI;AADL,aANgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA1B;;AAAA;AAAA;AAAA;AAAA;;AAaA,eAAeD,OAAf","sourcesContent":["import Head from '../../components/head';\r\nimport {useState , useEffect} from 'react';\r\nimport {Spin , Skeleton} from 'antd';\r\nimport jwt from 'jsonwebtoken';\r\nimport MyProfile from './Components/myProfile';\r\nimport PublicProfile from './Components/publicProfile';\r\n\r\nconst Profile = ({data})=>{\r\n\r\n    // const profile = data.profile[0];\r\n    \r\n    // const [userid,setData] = useState();\r\n    const [loading,setLoading] = useState(true);\r\n\r\n    // useEffect(()=>{\r\n    //     const token = window.localStorage.getItem(\"Tokens\");\r\n    //     jwt.verify(token,\"secret\",function (err , decoded) {\r\n    //         if (!err) {\r\n    //             setData(decoded.userId);\r\n    //             setLoading(false);\r\n    //         }else\r\n    //         {\r\n    //             console.log(err);\r\n    //             const location = \"/Auth/Signin/?ref=tokenexpired&location=\"+window.location.href;\r\n    //             window.location.replace(location);\r\n    //         }\r\n    //     });\r\n        \r\n    // },[])\r\n    if (loading) {\r\n        \r\n        return(\r\n        <>\r\n                <Head title=\"Loading\"/>\r\n                <div style={{position : 'fixed',top : '50%',left:'50%',marginTop :'-50px',marginLeft:'-50px'}}>\r\n                    <Spin size=\"large\" />\r\n                </div>\r\n        </>\r\n        )\r\n    }else{\r\n        return(\r\n            <div>\r\n                    {/* {userid === profile._id &&(\r\n                        <MyProfile profile={profile}/>\r\n                    )}\r\n                    {userid !== profile._id &&(\r\n                        <PublicProfile profile={profile}/>\r\n                    )} */}\r\n            </div>\r\n        )        \r\n    }\r\n    \r\n}\r\n\r\n\r\n// export async function getStaticPaths(){\r\n//     const res = await fetch(\"http://localhost:9000/profiles/\");\r\n//     const data = await res.json();\r\n//     var paths = [];\r\n//     data.response.profiles.map(profile=>{\r\n//         paths.push({params : {\r\n//             _id : profile._id\r\n//         }})\r\n//     })\r\n    \r\n//     return{\r\n//         paths ,\r\n//         fallback : false\r\n//     }\r\n// }\r\n// export async function getStaticProps({ params }){\r\n\r\n//     const url = \"http://localhost:9000/profiles/profile?userid=\"+params._id ;\r\n//     const res = await fetch(url);\r\n//     const data = await res.json();\r\n//     return{\r\n//        props : {\r\n//            data\r\n//        }\r\n//     }\r\n// }\r\nProfile.getInitialProps = async (ctx) => {\r\n\r\n    console.log(ctx);\r\n    const url = \"http://localhost:9000/profiles/profile?userid=\"+ctx.pathname ;\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n    return{\r\n       props : {\r\n           data\r\n       }\r\n    }\r\n  }\r\n\r\nexport default Profile ;"]},"metadata":{},"sourceType":"module"}