{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Noumane agouzil\\\\Desktop\\\\Normane\\\\My projects\\\\PfeProject\\\\Front-End\\\\pages\\\\temoignages\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Header from '../../components/header';\nimport Head from '../../components/head';\nimport Footer from '../../components/footer';\nimport './scss/tem.scss';\nimport TemCard from './Components/TemCard';\nimport { useEffect, useState } from 'react';\nimport { Skeleton, Modal, Button, notification } from 'antd';\nimport Axios from 'axios';\n\nvar Temoignages = function Temoignages(props) {\n  _s();\n\n  var _useState = useState(),\n      Data = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      id = _useState3[0],\n      setUserID = _useState3[1];\n\n  var _useState4 = useState(false),\n      temoign = _useState4[0],\n      setTemoign = _useState4[1];\n\n  var _useState5 = useState(false),\n      buttonLoading = _useState5[0],\n      setbuttonLoading = _useState5[1];\n\n  var _useState6 = useState(false),\n      linkErr = _useState6[0],\n      setLinkErr = _useState6[1];\n\n  var _useState7 = useState(''),\n      link = _useState7[0],\n      setLink = _useState7[1];\n\n  var _useState8 = useState(false),\n      isgood = _useState8[0],\n      setGood = _useState8[1];\n\n  useEffect(function () {\n    console.log(props);\n    setData(props.data.data);\n    setLoading(false);\n  }, []);\n\n  function validVideoId(id) {\n    var img = new Image();\n    img.src = \"http://img.youtube.com/vi/\" + id + \"/mqdefault.jpg\";\n\n    img.onload = function () {\n      checkThumbnail(this.width);\n    };\n  }\n\n  function checkThumbnail(width) {\n    //HACK a mq thumbnail has width of 320.\n    //if the video does not exist(therefore thumbnail don't exist), a default thumbnail of 120 width is returned.\n    if (width === 120) {\n      setLinkErr(true);\n      setbuttonLoading(false);\n    }\n\n    if (width !== 120) {\n      setGood(true);\n    }\n  }\n\n  var handleClick = function handleClick() {\n    setbuttonLoading(true);\n    var check = link.split(\"v=\");\n\n    if (check[0] == \"https://www.youtube.com/watch?\" || check[0] == \"www.youtube.com/watch?\" || check[0] == \"youtube.com/watch?\") {\n      validVideoId(check[1]);\n\n      if (isgood) {\n        Axios.post(\"http://localhost:9000/temoin/\", {\n          link: link\n        }, {\n          withCredentials: true\n        }).then(function (res) {\n          notification['success']({\n            message: 'Succès',\n            description: 'Votre Témoignage a été ajouté avec succès '\n          });\n          setTimeout(function () {\n            setbuttonLoading(false);\n            setTemoign(false);\n            window.location.reload();\n          }, 2000);\n        })[\"catch\"](function (err) {\n          console.log(err);\n          notification['error']({\n            message: \"Une erreur s'est produite\",\n            description: 'Veuillez réessayer plus tard'\n          });\n          setTimeout(function () {\n            setbuttonLoading(false);\n            setTemoign(false);\n            window.location.reload();\n          }, 2000);\n        });\n      }\n    } else {\n      setLinkErr(true);\n      setbuttonLoading(false);\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"ContentInside\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, __jsx(Modal, {\n    title: \"T\\xE9moignage vid\\xE9o\",\n    visible: temoign,\n    width: \"60%\",\n    onCancel: function onCancel() {\n      return setTemoign(false);\n    },\n    footer: [__jsx(Button, {\n      disabled: false,\n      key: \"submit\",\n      type: \"primary\",\n      loading: buttonLoading,\n      style: {\n        borderRadius: '10px',\n        fontFamily: 'GlacialBold'\n      },\n      onClick: handleClick,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, \"Termin\\xE9 !\")],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    style: {\n      color: '#318CE7',\n      fontFamily: 'GlacialBold',\n      fontSize: '16px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, \"Ajoutez votre lien Youtube :\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 133\n    }\n  }), __jsx(\"input\", {\n    className: linkErr ? \"input error\" : \"input\",\n    type: \"text\",\n    placeholder: \"Ex : https://www.youtube.com/watch?v=5qap5aO4i9A \",\n    value: link,\n    onChange: function onChange(e) {\n      setLink(e.target.value);\n      setLinkErr(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 218\n    }\n  }), __jsx(\"label\", {\n    className: linkErr ? \"errMsg\" : \"hidden\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, \"Ce lien n'est pas valide, veuillez fournir un lien valide\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 127\n    }\n  })), __jsx(Head, {\n    title: \"T\\xE9moignages | 6 solutions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }), __jsx(Header, {\n    active: \"temoignages\",\n    setUserID: setUserID,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"proposBody\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, __jsx(\"h1\", {\n    className: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, \"T\\xE9moignages\"), __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"baseline\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"tems\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }), id !== null && __jsx(\"div\", {\n    className: \"AddTem\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 19\n    }\n  }, __jsx(\"input\", {\n    className: \"TemButton\",\n    type: \"button\",\n    value: \"Ajouter un t\\xE9moignage\",\n    onClick: function onClick() {\n      return setTemoign(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }))), __jsx(Skeleton, {\n    loading: loading,\n    active: true,\n    avatar: true,\n    round: true,\n    className: \"sk\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, Data !== undefined && __jsx(\"div\", {\n    className: \"TemCards\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, Data.map(function (temData) {\n    return __jsx(TemCard, {\n      key: temData.temid,\n      props: temData,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 23\n      }\n    });\n  })))))), __jsx(Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }));\n};\n\n_s(Temoignages, \"nGFlpnvy9JMRX/b0G4ehv1RRJAI=\");\n\n_c = Temoignages;\nexport var __N_SSP = true;\nexport default Temoignages;\n\nvar _c;\n\n$RefreshReg$(_c, \"Temoignages\");","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/Front-End/pages/temoignages/index.jsx"],"names":["Header","Head","Footer","TemCard","useEffect","useState","Skeleton","Modal","Button","notification","Axios","Temoignages","props","Data","setData","loading","setLoading","id","setUserID","temoign","setTemoign","buttonLoading","setbuttonLoading","linkErr","setLinkErr","link","setLink","isgood","setGood","console","log","data","validVideoId","img","Image","src","onload","checkThumbnail","width","handleClick","check","split","post","withCredentials","then","res","message","description","setTimeout","window","location","reload","err","borderRadius","fontFamily","color","fontSize","e","target","value","display","justifyContent","alignItems","undefined","map","temData","temid"],"mappings":"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","sourcesContent":["import Header from '../../components/header';\r\nimport Head from '../../components/head';\r\nimport Footer from '../../components/footer';\r\nimport './scss/tem.scss';\r\nimport TemCard from './Components/TemCard';\r\nimport {useEffect , useState} from 'react';\r\nimport { Skeleton , Modal , Button, notification } from 'antd';\r\nimport Axios from 'axios';\r\n\r\n\r\n\r\n\r\n\r\nconst Temoignages = (props)=>{\r\n\r\n\r\n    const [Data,setData] = useState();\r\n    const [loading,setLoading] = useState(true);\r\n    const [id,setUserID]= useState(null);\r\n    const [temoign , setTemoign] = useState(false);\r\n    const [buttonLoading , setbuttonLoading] = useState(false);\r\n    const [linkErr,setLinkErr]=useState(false);\r\n    const [link , setLink] = useState('');\r\n    const [isgood,setGood] = useState(false);\r\n    useEffect(()=>{\r\n            console.log(props);\r\n            setData(props.data.data);\r\n            setLoading(false);\r\n    },[]);\r\n    function validVideoId(id) {\r\n        var img = new Image();\r\n        img.src = \"http://img.youtube.com/vi/\" + id + \"/mqdefault.jpg\";\r\n        img.onload = function () {\r\n            checkThumbnail(this.width);\r\n        }\r\n    }\r\n    \r\n    function checkThumbnail(width) {\r\n        //HACK a mq thumbnail has width of 320.\r\n        //if the video does not exist(therefore thumbnail don't exist), a default thumbnail of 120 width is returned.\r\n        if (width === 120) {\r\n            setLinkErr(true);\r\n            setbuttonLoading(false);\r\n        }\r\n        if (width !== 120) {\r\n            setGood(true);\r\n                }\r\n    }\r\n    \r\n    const handleClick = ()=>{\r\n        setbuttonLoading(true);\r\n        const check = link.split(\"v=\");\r\n        if (check[0] == \"https://www.youtube.com/watch?\" || check[0] == \"www.youtube.com/watch?\" || check[0] == \"youtube.com/watch?\" ) {\r\n            validVideoId(check[1]);\r\n            if (isgood) {\r\n                Axios.post(\"http://localhost:9000/temoin/\",{link : link},{withCredentials : true})\r\n                .then(res =>{\r\n                    notification['success']({\r\n                        message: 'Succès',\r\n                        description:'Votre Témoignage a été ajouté avec succès '\r\n                    })\r\n                    setTimeout(() => {\r\n                        setbuttonLoading(false);\r\n                        setTemoign(false);\r\n                        window.location.reload();\r\n                    }, 2000);\r\n                })\r\n                .catch(err =>{\r\n                    console.log(err);\r\n                    notification['error']({\r\n                        message: \"Une erreur s'est produite\",\r\n                        description:'Veuillez réessayer plus tard'\r\n                    })\r\n                    setTimeout(() => {\r\n                        setbuttonLoading(false);\r\n                        setTemoign(false);\r\n                        window.location.reload();\r\n                    }, 2000);\r\n                })\r\n            }\r\n        }\r\n        else\r\n        {\r\n            setLinkErr(true);\r\n            setbuttonLoading(false);\r\n        }\r\n        \r\n    }\r\n    return (\r\n      <>\r\n        <div className=\"body\">\r\n          <div className=\"ContentInside\">\r\n            <Modal\r\n              title=\"Témoignage vidéo\"\r\n              visible={temoign}\r\n              width=\"60%\"\r\n              onCancel={() => setTemoign(false)}\r\n              footer={[\r\n                <Button disabled={false} key=\"submit\" type=\"primary\" loading={buttonLoading} style={{borderRadius :'10px', fontFamily :'GlacialBold'}}  onClick={handleClick}>\r\n                                Terminé !\r\n                </Button>\r\n              ]}\r\n            >\r\n            <label style={{color : '#318CE7' , fontFamily : 'GlacialBold' , fontSize : '16px'}}>Ajoutez votre lien Youtube :</label><br/>\r\n            <input className={linkErr ? \"input error\" : \"input\"} type=\"text\" placeholder=\"Ex : https://www.youtube.com/watch?v=5qap5aO4i9A \"  value={link} onChange={(e)=>{setLink(e.target.value);setLinkErr(false)}} /><br />\r\n            <label className={linkErr ? \"errMsg\" : \"hidden\"}>Ce lien n'est pas valide, veuillez fournir un lien valide</label><br />\r\n            </Modal>\r\n\r\n            <Head title=\"Témoignages | 6 solutions\" />\r\n            <Header active=\"temoignages\" setUserID={setUserID} />\r\n            <div className=\"proposBody\">\r\n              <h1 className=\"title\">Témoignages</h1>\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-between\",\r\n                  alignItems: \"baseline\",\r\n                }}\r\n              >\r\n                <div className=\"tems\"></div>\r\n                {id !== null && (\r\n                  <div className=\"AddTem\">\r\n                    <input\r\n                      className=\"TemButton\"\r\n                      type=\"button\"\r\n                      value=\"Ajouter un témoignage\"\r\n                      onClick={() => setTemoign(true)}\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <Skeleton\r\n                loading={loading}\r\n                active={true}\r\n                avatar={true}\r\n                round\r\n                className=\"sk\"\r\n              >\r\n                {Data !== undefined && (\r\n                  <div className=\"TemCards\">\r\n                    {Data.map((temData) => (\r\n                      <TemCard key={temData.temid} props={temData} />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </Skeleton>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </>\r\n    );\r\n}\r\nexport const getServerSideProps = async (ctx) => {\r\n    try {\r\n        const url = \"http://localhost:9000/temoin/\" ;\r\n        const res = await fetch(url); \r\n        const statusCode = res.status;\r\n        const data = await res.json();\r\n        \r\n        if (statusCode !== 200) {\r\n            throw statusCode \r\n        }\r\n        return  {\r\n            props : {data }\r\n        }\r\n    } \r\n    catch (error) {\r\n        ctx.res.statusCode = error;\r\n        return {\r\n               props : {statusCode : error}\r\n        };\r\n    }   \r\n  }\r\nexport default Temoignages ;"]},"metadata":{},"sourceType":"module"}