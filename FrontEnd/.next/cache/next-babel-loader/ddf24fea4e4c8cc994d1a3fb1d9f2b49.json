{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Header from \"../../components/header\";\nimport Head from \"../../components/head\";\nimport { Menu, Spin } from \"antd\";\nimport { useState, useEffect } from 'react';\nimport './sass/accountSettings.scss';\nimport AccountComp from \"../../components/account_Components/AccountComp\";\nimport Trash from \"../../components/account_Components/trashSvg\";\nimport Footer from \"../../components/footer\";\n\nconst accountSett = props => {\n  const {\n    0: current,\n    1: setCurrent\n  } = useState('Account');\n\n  const handleClick = e => {\n    setCurrent(e.key);\n  };\n\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: data,\n    1: setData\n  } = useState();\n  useEffect(() => {\n    if (props.statusCode === 401) {\n      const location = \"/Auth/Signin/?ref=tokenexpired&location=\" + window.location.href;\n      window.location.replace(location);\n    } else {\n      console.log(props.data);\n      setData(props.data.profile);\n      setLoading(false);\n    }\n  }, []);\n\n  if (loading) {\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      title: \"Loading\"\n    }), __jsx(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        marginTop: '-50px',\n        marginLeft: '-50px'\n      }\n    }, __jsx(Spin, {\n      size: \"large\"\n    })));\n  } else {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"body\"\n    }, __jsx(\"div\", {\n      className: \"ContentInside\"\n    }, __jsx(Header, null), __jsx(Head, {\n      title: \"Param\\xE8tres | 6Solutions\"\n    }), __jsx(\"div\", {\n      className: \"parmHeader\"\n    }, __jsx(\"h1\", {\n      className: \"title\"\n    }, \"Param\\xE8tres\")), __jsx(\"div\", {\n      className: \"parmBody\"\n    }, __jsx(Menu, {\n      onClick: handleClick,\n      selectedKeys: current,\n      mode: \"horizontal\",\n      style: {\n        marginTop: '3%'\n      }\n    }, __jsx(Menu.Item, {\n      key: \"Account\",\n      style: {\n        fontWeight: 'bolder'\n      }\n    }, \"Compte\"), __jsx(Menu.Item, {\n      key: \"Privacy\",\n      style: {\n        fontWeight: 'bolder'\n      }\n    }, \"Confidentialit\\xE9 et conditions de service\"))), __jsx(\"div\", {\n      className: \"MenuContent\"\n    }, current === \"Account\" && __jsx(React.Fragment, null, __jsx(AccountComp, {\n      profile: data\n    })), current === \"Privacy\" && __jsx(React.Fragment, null)), __jsx(\"div\", {\n      className: \"DeleteAccount\"\n    }, __jsx(\"div\", null, __jsx(Trash, null), __jsx(\"span\", null, \"Supprimez votre compte\"))))), __jsx(Footer, null));\n  }\n};\n\nexport const getServerSideProps = async ctx => {\n  try {\n    const cookie = ctx.req.headers.cookie;\n    const baseUrl = ctx.req ? `${ctx.req.protocol}://${ctx.req.get('Host')}` : '';\n    const url = baseUrl + \"/api/profiles/myprofile\";\n    const res = await fetch(url, {\n      headers: {\n        cookie\n      }\n    });\n    const statusCode = res.status;\n    const data = await res.json();\n\n    if (statusCode !== 200) {\n      throw statusCode;\n    }\n\n    return {\n      props: {\n        data\n      }\n    };\n  } catch (error) {\n    ctx.res.statusCode = error;\n    return {\n      props: {\n        statusCode: error\n      }\n    };\n  }\n};\nexport default accountSett;","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/FrontEnd/pages/accountsett/index.jsx"],"names":["Header","Head","Menu","Spin","useState","useEffect","AccountComp","Trash","Footer","accountSett","props","current","setCurrent","handleClick","e","key","loading","setLoading","data","setData","statusCode","location","window","href","replace","console","log","profile","position","top","left","marginTop","marginLeft","fontWeight","getServerSideProps","ctx","cookie","req","headers","baseUrl","protocol","get","url","res","fetch","status","json","error"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,yBAAnB;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,SAASC,IAAT,EAAgBC,IAAhB,QAA4B,MAA5B;AACA,SAAQC,QAAR,EAAmBC,SAAnB,QAAmC,OAAnC;AAEA,OAAO,6BAAP;AACA,OAAOC,WAAP,MAAwB,iDAAxB;AACA,OAAOC,KAAP,MAAkB,8CAAlB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;;AACA,MAAMC,WAAW,GAAIC,KAAD,IAAS;AAEzB,QAAM;AAAA,OAACC,OAAD;AAAA,OAAWC;AAAX,MAAyBR,QAAQ,CAAC,SAAD,CAAvC;;AAEA,QAAMS,WAAW,GAAGC,CAAC,IAAG;AACpBF,IAAAA,UAAU,CAACE,CAAC,CAACC,GAAH,CAAV;AACH,GAFD;;AAGA,QAAM;AAAA,OAACC,OAAD;AAAA,OAASC;AAAT,MAAuBb,QAAQ,CAAC,IAAD,CAArC;AACA,QAAM;AAAA,OAACc,IAAD;AAAA,OAAQC;AAAR,MAAmBf,QAAQ,EAAjC;AACAC,EAAAA,SAAS,CAAC,MAAI;AACV,QAAIK,KAAK,CAACU,UAAN,KAAqB,GAAzB,EAA8B;AAC1B,YAAMC,QAAQ,GAAG,6CAA2CC,MAAM,CAACD,QAAP,CAAgBE,IAA5E;AACAD,MAAAA,MAAM,CAACD,QAAP,CAAgBG,OAAhB,CAAwBH,QAAxB;AACH,KAHD,MAGK;AACDI,MAAAA,OAAO,CAACC,GAAR,CAAYhB,KAAK,CAACQ,IAAlB;AACAC,MAAAA,OAAO,CAACT,KAAK,CAACQ,IAAN,CAAWS,OAAZ,CAAP;AACAV,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,GATQ,EASP,EATO,CAAT;;AAUA,MAAID,OAAJ,EAAc;AAEV,WACA,4BACQ,MAAC,IAAD;AAAM,MAAA,KAAK,EAAC;AAAZ,MADR,EAEQ;AAAK,MAAA,KAAK,EAAE;AAACY,QAAAA,QAAQ,EAAG,OAAZ;AAAoBC,QAAAA,GAAG,EAAG,KAA1B;AAAgCC,QAAAA,IAAI,EAAC,KAArC;AAA2CC,QAAAA,SAAS,EAAE,OAAtD;AAA8DC,QAAAA,UAAU,EAAC;AAAzE;AAAZ,OACI,MAAC,IAAD;AAAM,MAAA,IAAI,EAAC;AAAX,MADJ,CAFR,CADA;AAQH,GAVD,MAUK;AAED,WACI,4BACA;AAAK,MAAA,SAAS,EAAC;AAAf,OACI;AAAK,MAAA,SAAS,EAAC;AAAf,OACI,MAAC,MAAD,OADJ,EAEI,MAAC,IAAD;AAAM,MAAA,KAAK,EAAC;AAAZ,MAFJ,EAGI;AAAK,MAAA,SAAS,EAAC;AAAf,OACI;AAAI,MAAA,SAAS,EAAC;AAAd,uBADJ,CAHJ,EAMI;AAAK,MAAA,SAAS,EAAC;AAAf,OACI,MAAC,IAAD;AAAM,MAAA,OAAO,EAAEnB,WAAf;AAA4B,MAAA,YAAY,EAAEF,OAA1C;AAAmD,MAAA,IAAI,EAAC,YAAxD;AAAqE,MAAA,KAAK,EAAE;AAACoB,QAAAA,SAAS,EAAE;AAAZ;AAA5E,OACI,MAAC,IAAD,CAAM,IAAN;AAAW,MAAA,GAAG,EAAC,SAAf;AAAyB,MAAA,KAAK,EAAE;AAACE,QAAAA,UAAU,EAAG;AAAd;AAAhC,gBADJ,EAII,MAAC,IAAD,CAAM,IAAN;AAAW,MAAA,GAAG,EAAC,SAAf;AAAyB,MAAA,KAAK,EAAE;AAACA,QAAAA,UAAU,EAAG;AAAd;AAAhC,qDAJJ,CADJ,CANJ,EAgBI;AAAK,MAAA,SAAS,EAAC;AAAf,OACStB,OAAO,KAAK,SAAZ,IACG,4BACA,MAAC,WAAD;AAAa,MAAA,OAAO,EAAEO;AAAtB,MADA,CAFZ,EAMSP,OAAO,KAAK,SAAZ,IACG,2BAPZ,CAhBJ,EA2BI;AAAK,MAAA,SAAS,EAAC;AAAf,OACI,mBAAK,MAAC,KAAD,OAAL,EAAa,6CAAb,CADJ,CA3BJ,CADJ,CADA,EAkCA,MAAC,MAAD,OAlCA,CADJ;AAuCH;AACJ,CAvED;;AAwEA,OAAO,MAAMuB,kBAAkB,GAAG,MAAOC,GAAP,IAAe;AAC7C,MAAI;AACA,UAAMC,MAAM,GAAGD,GAAG,CAACE,GAAJ,CAAQC,OAAR,CAAgBF,MAA/B;AACA,UAAMG,OAAO,GAAGJ,GAAG,CAACE,GAAJ,GAAW,GAAEF,GAAG,CAACE,GAAJ,CAAQG,QAAS,MAAKL,GAAG,CAACE,GAAJ,CAAQI,GAAR,CAAY,MAAZ,CAAoB,EAAvD,GAA2D,EAA3E;AACA,UAAMC,GAAG,GAAGH,OAAO,GAAC,yBAApB;AACA,UAAMI,GAAG,GAAG,MAAMC,KAAK,CAAEF,GAAF,EAAM;AAACJ,MAAAA,OAAO,EAAG;AAACF,QAAAA;AAAD;AAAX,KAAN,CAAvB;AACA,UAAMhB,UAAU,GAAGuB,GAAG,CAACE,MAAvB;AACA,UAAM3B,IAAI,GAAG,MAAMyB,GAAG,CAACG,IAAJ,EAAnB;;AAEA,QAAI1B,UAAU,KAAK,GAAnB,EAAwB;AACpB,YAAMA,UAAN;AACH;;AACD,WAAQ;AACJV,MAAAA,KAAK,EAAG;AAACQ,QAAAA;AAAD;AADJ,KAAR;AAGH,GAdD,CAeA,OAAO6B,KAAP,EAAc;AACVZ,IAAAA,GAAG,CAACQ,GAAJ,CAAQvB,UAAR,GAAqB2B,KAArB;AACA,WAAO;AACArC,MAAAA,KAAK,EAAG;AAACU,QAAAA,UAAU,EAAG2B;AAAd;AADR,KAAP;AAGH;AACJ,CAtBM;AAuBP,eAAetC,WAAf","sourcesContent":["import Header from \"../../components/header\";\r\nimport Head from \"../../components/head\";\r\nimport { Menu , Spin } from \"antd\";\r\nimport {useState , useEffect} from 'react';\r\n\r\nimport './sass/accountSettings.scss'\r\nimport AccountComp from \"../../components/account_Components/AccountComp\";\r\nimport Trash from \"../../components/account_Components/trashSvg\";\r\nimport Footer from \"../../components/footer\";\r\nconst accountSett = (props)=>{\r\n\r\n    const [current , setCurrent] = useState('Account');\r\n\r\n    const handleClick = e =>{\r\n        setCurrent(e.key);\r\n    }\r\n    const [loading,setLoading] = useState(true);\r\n    const [data , setData] = useState()\r\n    useEffect(()=>{\r\n        if (props.statusCode === 401) {\r\n            const location = \"/Auth/Signin/?ref=tokenexpired&location=\"+window.location.href;\r\n            window.location.replace(location);\r\n        }else{\r\n            console.log(props.data);\r\n            setData(props.data.profile);\r\n            setLoading(false); \r\n        }\r\n    },[])\r\n    if (loading ) {\r\n        \r\n        return(\r\n        <>\r\n                <Head title=\"Loading\"/>\r\n                <div style={{position : 'fixed',top : '50%',left:'50%',marginTop :'-50px',marginLeft:'-50px'}}>\r\n                    <Spin size=\"large\" />\r\n                </div>\r\n        </>\r\n        )\r\n    }else{\r\n\r\n        return(\r\n            <>\r\n            <div className=\"body\">\r\n                <div className=\"ContentInside\">\r\n                    <Header/>\r\n                    <Head title=\"Paramètres | 6Solutions\"/>\r\n                    <div className=\"parmHeader\">\r\n                        <h1 className=\"title\">Paramètres</h1>\r\n                    </div>\r\n                    <div className=\"parmBody\">\r\n                        <Menu onClick={handleClick} selectedKeys={current} mode=\"horizontal\" style={{marginTop :'3%'}}>\r\n                            <Menu.Item key=\"Account\" style={{fontWeight : 'bolder'}} >\r\n                                Compte\r\n                            </Menu.Item>\r\n                            <Menu.Item key=\"Privacy\" style={{fontWeight : 'bolder'}} >\r\n                            Confidentialité et conditions de service\r\n                            </Menu.Item>\r\n                        </Menu>\r\n                    </div>\r\n                    <div className=\"MenuContent\">\r\n                            {current === \"Account\" &&(\r\n                                <>\r\n                                <AccountComp profile={data}/>\r\n                                </>\r\n                            )}\r\n                            {current === \"Privacy\" &&(\r\n                                <>\r\n                                </>\r\n                            )}\r\n                    </div>\r\n                    <div className=\"DeleteAccount\">\r\n                        <div><Trash/><span>Supprimez votre compte</span></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Footer/>\r\n            </>\r\n            \r\n        )\r\n    }\r\n}\r\nexport const getServerSideProps = async (ctx) => {\r\n    try {\r\n        const cookie = ctx.req.headers.cookie ;\r\n        const baseUrl = ctx.req ? `${ctx.req.protocol}://${ctx.req.get('Host')}` : '';\r\n        const url = baseUrl+\"/api/profiles/myprofile\" ;\r\n        const res = await fetch( url,{headers : {cookie}}); \r\n        const statusCode = res.status;\r\n        const data = await res.json();\r\n        \r\n        if (statusCode !== 200) {\r\n            throw statusCode \r\n        }\r\n        return  {\r\n            props : {data }\r\n        }\r\n    } \r\n    catch (error) {\r\n        ctx.res.statusCode = error;\r\n        return {\r\n               props : {statusCode : error}\r\n        };\r\n    }   \r\n}\r\nexport default accountSett ;"]},"metadata":{},"sourceType":"module"}