{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Noumane agouzil\\\\Desktop\\\\Normane\\\\My projects\\\\PfeProject\\\\Front-End\\\\pages\\\\Settings\\\\index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport axios from 'axios';\nimport Lottie from 'react-lottie';\nimport animationData from './Components/Anim.json';\nimport Head from '../../components/head';\nimport { storage } from './Components/firebase-config';\nimport '../../styles/ProfileSettings.scss';\nimport jwt from 'jsonwebtoken';\nimport { useState, useEffect } from 'react';\nimport { Modal, Button } from 'antd';\nimport '../Auth/Sass/antd-select.scss';\n\nconst Settings = () => {\n  // States \n  const {\n    0: file,\n    1: setFile\n  } = useState(\"https://firebasestorage.googleapis.com/v0/b/image-upload-test-7d968.appspot.com/o/images%2FDefaults%2Fman.svg?alt=media&token=9cc204e7-e9b3-4a5d-970a-1242a04f90de\");\n  const {\n    0: data,\n    1: setData\n  } = useState();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: sendingData,\n    1: setSend\n  } = useState(false);\n  const {\n    0: filefirebase,\n    1: setfire\n  } = useState();\n  const {\n    0: visible,\n    1: setvisible\n  } = useState(false);\n  const {\n    0: changed,\n    1: setchanged\n  } = useState(false); // ----------------------------------------------\n  // Modal functions \n\n  const showModal = () => {\n    setvisible(true);\n  };\n\n  const handleOk = () => {\n    setvisible(false);\n  };\n\n  const handleCancel = () => {\n    setvisible(false);\n  }; // Firebase url upload function \n\n\n  const firebaseUrl = file => {\n    return new Promise((resolve, reject) => {\n      let currentImageName = \"firebase-image-\" + Date.now();\n      let uploadImage = storage.ref(`images/${currentImageName}`).put(file);\n      uploadImage.on('state_changed', snapshot => {}, error => {\n        reject(error);\n      }, () => {\n        storage.ref('images').child(currentImageName).getDownloadURL().then(url => {\n          const imageData = [url, currentImageName];\n          resolve(imageData);\n        });\n      });\n    });\n  }; // Hook getting called before the render \n\n\n  useEffect(() => {\n    const token = window.localStorage.getItem(\"Tokens\");\n    jwt.verify(token, \"secret\", function (err, decoded) {\n      if (!err) {\n        axios.get('http://localhost:9000/profiles/profile?userid=' + decoded.userId).then(res => {\n          setData(res.data.profile[0]);\n          setLoading(false);\n          console.log(data);\n        }).catch(err => alert(err));\n      } else {\n        alert(\"unauthorized !!\");\n        setTimeout(() => {\n          window.location.replace(\"/\");\n        }, 5000);\n      }\n    });\n  }, []); // On submit ----------------------------------\n\n  const Onsubmit = async () => {\n    setSend(true);\n    const imgData = await firebaseUrl(filefirebase);\n    console.log(imgData);\n  }; // ------------------------------------------------\n  // When change of image\n\n\n  const handleChange = e => {\n    setchanged(true);\n\n    if (e.target.files[0] !== undefined) {\n      try {\n        setfire(e.target.files[0]);\n        console.log(e.target.files[0]);\n        const url = URL.createObjectURL(e.target.files[0]);\n        setFile(url);\n      } catch (error) {\n        console.error(error);\n        alert(error);\n      }\n    }\n  }; // -----------------------------\n  // Lottie options \n\n\n  const defaultOptions = {\n    loop: true,\n    autoplay: true,\n    animationData: animationData,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid\"\n    }\n  }; // ---------------------------------\n\n  if (loading) {\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      title: \"Configurez votre profile | 6 Solutions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }), \"LOADING\");\n  } else {\n    return __jsx(\"div\", {\n      className: \"ConfigureProfile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }\n    }, __jsx(Head, {\n      title: \"Configurez votre profile | 6 Solutions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 14\n      }\n    }), __jsx(\"div\", {\n      className: \"HeaderContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 14\n      }\n    }, __jsx(\"div\", {\n      className: \"Header_Logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 18\n      }\n    }, __jsx(\"img\", {\n      src: \"../static/Icons/LOGO2017.png\",\n      height: \"30\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 22\n      }\n    })), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 18\n      }\n    }, __jsx(\"span\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 22\n      }\n    }, \"Configurez votre profile\")), __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 18\n      }\n    }, \"Help\")), __jsx(\"div\", {\n      className: \"FlexContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 14\n      }\n    }, __jsx(\"div\", {\n      className: \"dataContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 18\n      }\n    }, __jsx(\"div\", {\n      className: \"formConfig\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 22\n      }\n    }, __jsx(\"div\", {\n      className: \"form_Head\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 26\n      }\n    }, __jsx(\"div\", {\n      className: \"ProfileImg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 30\n      }\n    }, __jsx(\"img\", {\n      src: file,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 34\n      }\n    }), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 52\n      }\n    }), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 34\n      }\n    }, __jsx(\"label\", {\n      onClick: showModal,\n      className: \"Showmodal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 38\n      }\n    }, __jsx(\"i\", {\n      class: \"fa fa-eye\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 41\n      }\n    })), __jsx(\"label\", {\n      class: \"custom-file-upload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 38\n      }\n    }, __jsx(\"input\", {\n      type: \"file\",\n      id: \"img\",\n      name: \"img\",\n      placeholder: \"Choisissez photo\",\n      accept: \"image/*\",\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 41\n      }\n    }), __jsx(\"i\", {\n      class: \"fa fa-upload\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 41\n      }\n    }), \"   Ajouter photo\"), __jsx(\"label\", {\n      className: \"Showmodal\",\n      onClick: () => {\n        setFile(\"https://firebasestorage.googleapis.com/v0/b/image-upload-test-7d968.appspot.com/o/images%2FDefaults%2Fman.svg?alt=media&token=9cc204e7-e9b3-4a5d-970a-1242a04f90de\");\n        setchanged(false);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 38\n      }\n    }, __jsx(\"i\", {\n      class: \"fa fa-refresh\",\n      style: {\n        color: '#3287a8'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 41\n      }\n    }))), __jsx(Modal, {\n      title: \"Image de profile\",\n      visible: visible,\n      onOk: handleOk,\n      onCancel: handleCancel,\n      footer: null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 33\n      }\n    }, __jsx(\"img\", {\n      src: file,\n      width: \"100%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 37\n      }\n    }))), __jsx(\"div\", {\n      className: \"ProfileInfo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 30\n      }\n    }, __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 34\n      }\n    }, data.companyname))), __jsx(\"div\", {\n      className: \"fieldsContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 26\n      }\n    }, __jsx(\"div\", {\n      className: \"Row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 30\n      }\n    }, __jsx(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 34\n      }\n    }, \"Presentation\"), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 61\n      }\n    }), __jsx(\"textarea\", {\n      className: \"input\",\n      placeholder: \"D\\xE9crivez votre entreprise\",\n      rows: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 34\n      }\n    }), __jsx(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 34\n      }\n    }, \"Langues parl\\xE9s\"), __jsx(\"input\", {\n      className: \"input\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 34\n      }\n    }), __jsx(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 34\n      }\n    }, \"Dipl\\xF4me et formations\"), __jsx(\"input\", {\n      className: \"input\",\n      type: \"text\",\n      placeholder: \"tags goes here\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 34\n      }\n    })))), __jsx(\"div\", {\n      className: \"Illustration\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 22\n      }\n    }, __jsx(Lottie, {\n      options: defaultOptions,\n      height: 500,\n      width: 500,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 26\n      }\n    }), __jsx(\"div\", {\n      className: \"buttonContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 26\n      }\n    }, __jsx(\"button\", {\n      className: \"later\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 30\n      }\n    }, \"later\"), __jsx(\"input\", {\n      className: \"SignButton next\",\n      type: \"submit\",\n      onClick: Onsubmit,\n      value: \"Suivant\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 30\n      }\n    }))))));\n  }\n};\n\nexport default Settings;","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/Front-End/pages/Settings/index.js"],"names":["axios","Lottie","animationData","Head","storage","jwt","useState","useEffect","Modal","Button","Settings","file","setFile","data","setData","loading","setLoading","sendingData","setSend","filefirebase","setfire","visible","setvisible","changed","setchanged","showModal","handleOk","handleCancel","firebaseUrl","Promise","resolve","reject","currentImageName","Date","now","uploadImage","ref","put","on","snapshot","error","child","getDownloadURL","then","url","imageData","token","window","localStorage","getItem","verify","err","decoded","get","userId","res","profile","console","log","catch","alert","setTimeout","location","replace","Onsubmit","imgData","handleChange","e","target","files","undefined","URL","createObjectURL","defaultOptions","loop","autoplay","rendererSettings","preserveAspectRatio","color","companyname"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport Lottie from 'react-lottie' ;\r\nimport animationData from './Components/Anim.json';\r\nimport Head from '../../components/head';\r\nimport { storage } from './Components/firebase-config';\r\nimport '../../styles/ProfileSettings.scss';\r\nimport jwt from 'jsonwebtoken';\r\nimport {useState , useEffect} from 'react';\r\nimport { Modal, Button } from 'antd';\r\nimport '../Auth/Sass/antd-select.scss';\r\nconst Settings = ()=>{\r\n\r\n    // States \r\n\r\n    const [file,setFile] = useState(\"https://firebasestorage.googleapis.com/v0/b/image-upload-test-7d968.appspot.com/o/images%2FDefaults%2Fman.svg?alt=media&token=9cc204e7-e9b3-4a5d-970a-1242a04f90de\");\r\n    const [data , setData] = useState();\r\n    const [loading , setLoading] = useState(true); \r\n    const [sendingData , setSend] = useState(false);\r\n    const [filefirebase,setfire] = useState();\r\n    const [visible,setvisible] = useState(false);\r\n    const [changed,setchanged] = useState(false);\r\n    // ----------------------------------------------\r\n\r\n    // Modal functions \r\n\r\n    const showModal   = () =>{\r\n        setvisible(true);\r\n    }\r\n\r\n    const handleOk  = () =>{\r\n        setvisible(false);\r\n    }\r\n    const handleCancel = () =>{\r\n        setvisible(false);\r\n    }\r\n\r\n\r\n    // Firebase url upload function \r\n    const firebaseUrl = (file) =>{\r\n        return new Promise((resolve,reject)=>{\r\n            let currentImageName = \"firebase-image-\" + Date.now();\r\n            let uploadImage = storage.ref(`images/${currentImageName}`).put(file);\r\n    \r\n            uploadImage.on('state_changed',\r\n                (snapshot) => { },\r\n                (error) => {\r\n                    reject(error);\r\n                },\r\n                () => {\r\n                    storage.ref('images').child(currentImageName).getDownloadURL().then(url => {\r\n                        const imageData = [url, currentImageName]\r\n                        resolve(imageData);\r\n                    })\r\n                })\r\n        })\r\n    } \r\n    // Hook getting called before the render \r\n    useEffect(()=>{\r\n        const token = window.localStorage.getItem(\"Tokens\");\r\n        jwt.verify(token,\"secret\",function (err , decoded) {\r\n            if (!err) {\r\n                axios.get('http://localhost:9000/profiles/profile?userid='+decoded.userId)\r\n                .then(res =>{\r\n                    setData(res.data.profile[0]);\r\n                    setLoading(false);\r\n                    console.log(data);\r\n                })\r\n                .catch(err => alert(err));\r\n            }else\r\n            {\r\n                alert(\"unauthorized !!\") ;\r\n                setTimeout(() => {\r\n                    window.location.replace(\"/\");\r\n                }, 5000);\r\n            }\r\n        });\r\n        \r\n    },[])\r\n\r\n    // On submit ----------------------------------\r\n\r\n    const Onsubmit = async () =>{\r\n        setSend(true);\r\n        const imgData = await firebaseUrl(filefirebase);\r\n        console.log(imgData);\r\n    }\r\n\r\n    // ------------------------------------------------\r\n\r\n    // When change of image\r\n    const handleChange = (e)=>{\r\n        setchanged(true);\r\n        if (e.target.files[0] !== undefined) {\r\n            try {\r\n                setfire(e.target.files[0]);\r\n                console.log(e.target.files[0]);\r\n                const url =  URL.createObjectURL(e.target.files[0]);\r\n                setFile(url);\r\n            } catch (error) {\r\n                console.error(error);\r\n                alert(error);\r\n            } \r\n        }\r\n        \r\n        \r\n    }\r\n    // -----------------------------\r\n    // Lottie options \r\n    const defaultOptions = {\r\n        loop: true,\r\n        autoplay: true,\r\n        animationData: animationData,\r\n        rendererSettings: {\r\n            preserveAspectRatio: \"xMidYMid\",\r\n        },\r\n    };\r\n    // ---------------------------------\r\n    if (loading) {\r\n        return(\r\n            <>\r\n                <Head title=\"Configurez votre profile | 6 Solutions\"/>\r\n                LOADING\r\n            </>\r\n        )\r\n    } else {\r\n        \r\n    return(\r\n        <div className=\"ConfigureProfile\">\r\n             <Head title=\"Configurez votre profile | 6 Solutions\"/>\r\n             <div className=\"HeaderContainer\">\r\n                 <div className=\"Header_Logo\">\r\n                     <img src=\"../static/Icons/LOGO2017.png\" height=\"30\" />\r\n                 </div>\r\n                 <div>\r\n                     <span className=\"title\">Configurez votre profile</span>\r\n                 </div>\r\n                    \r\n                 <span>Help</span>\r\n             </div>\r\n             <div className=\"FlexContainer\">\r\n                 <div className=\"dataContainer\">\r\n                     <div className=\"formConfig\">\r\n                         <div className=\"form_Head\">\r\n                             <div className=\"ProfileImg\">\r\n                                 <img src={file} /><br/>\r\n                                 <div>\r\n                                     <label onClick={showModal} className=\"Showmodal\">\r\n                                        <i class=\"fa fa-eye\"></i> \r\n                                     </label>\r\n                                     <label class=\"custom-file-upload\">\r\n                                        <input type=\"file\" id=\"img\" name=\"img\" placeholder=\"Choisissez photo\" accept=\"image/*\" onChange={handleChange}/>\r\n                                        <i class=\"fa fa-upload\" aria-hidden=\"true\"></i>   Ajouter photo\r\n                                     </label>\r\n                                     <label className=\"Showmodal\" onClick={()=>{setFile(\"https://firebasestorage.googleapis.com/v0/b/image-upload-test-7d968.appspot.com/o/images%2FDefaults%2Fman.svg?alt=media&token=9cc204e7-e9b3-4a5d-970a-1242a04f90de\"); setchanged(false)}}>\r\n                                        <i class=\"fa fa-refresh\" style={{color : '#3287a8'}}></i>\r\n                                     </label>\r\n                                 </div>\r\n                                 \r\n                                <Modal\r\n                                    title=\"Image de profile\"\r\n                                    visible={visible}\r\n                                    onOk={handleOk}\r\n                                    onCancel={handleCancel}\r\n                                    footer={null}\r\n                                    >\r\n                                    <img src={file}  width=\"100%\"/>\r\n                                </Modal>\r\n                             </div>\r\n                             <div className=\"ProfileInfo\">\r\n                                 <h3>{data.companyname}</h3>\r\n                             </div>\r\n                             \r\n                         </div>\r\n                         <div className=\"fieldsContainer\">\r\n                             <div className=\"Row\">\r\n                                 <label>Presentation</label><br/>\r\n                                 <textarea  className=\"input\" placeholder=\"Décrivez votre entreprise\" rows=\"4\" />\r\n                                 <label>Langues parlés</label>\r\n                                 <input  className=\"input\" type=\"text\"/>\r\n                                 <label>Diplôme et formations</label>\r\n                                 <input className=\"input\" type=\"text\" placeholder=\"tags goes here\"/>\r\n                             </div>\r\n                         </div>\r\n                     </div>\r\n                     <div className=\"Illustration\">\r\n                         <Lottie\r\n                         options={defaultOptions}\r\n                         height={500}\r\n                         width={500}\r\n                         />\r\n                         <div className=\"buttonContainer\">\r\n                             <button className=\"later\">later</button>\r\n                             <input\r\n                             className=\"SignButton next\"\r\n                             type=\"submit\"\r\n                             onClick={Onsubmit}\r\n                             value=\"Suivant\"\r\n                             />\r\n                             \r\n                         </div>\r\n                     </div>\r\n                 </div>\r\n             </div>\r\n             \r\n         </div>\r\n     )\r\n    }\r\n}\r\n\r\nexport default Settings ;"]},"metadata":{},"sourceType":"module"}