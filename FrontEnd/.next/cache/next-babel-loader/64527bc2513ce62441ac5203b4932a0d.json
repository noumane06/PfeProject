{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Noumane agouzil\\\\Desktop\\\\Normane\\\\My projects\\\\PfeProject\\\\Front-End\\\\pages\\\\Profiles\\\\[_id].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from '../../components/head';\nimport Header from '../../components/header';\nimport { useState, useEffect } from 'react';\nimport { Spin, Skeleton } from 'antd';\nimport jwt from 'jsonwebtoken';\nimport MyProfile from './Components/myProfile';\nimport PublicProfile from './Components/publicProfile';\n\nconst Profile = ({\n  props\n}) => {\n  console.log(props);\n  const {\n    0: userid,\n    1: setData\n  } = useState();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  useEffect(() => {\n    const token = window.localStorage.getItem(\"Tokens\");\n    jwt.verify(token, \"secret\", function (err, decoded) {\n      if (!err) {\n        setData(decoded.userId);\n        setLoading(false);\n      } else {\n        console.log(err);\n        const location = \"/Auth/Signin/?ref=tokenexpired&location=\" + window.location.href;\n        window.location.replace(location);\n      }\n    });\n  }, []);\n\n  if (loading) {\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      title: \"Loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        marginTop: '-50px',\n        marginLeft: '-50px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }\n    }, __jsx(Spin, {\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 21\n      }\n    })));\n  } else {\n    return __jsx(\"div\", {\n      className: \"body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }\n    }, __jsx(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 21\n      }\n    }), __jsx(Skeleton, {\n      loading: true,\n      active: true,\n      avatar: true,\n      round: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 21\n      }\n    }, userid === props.data.profile[0]._id && props.data !== undefined && __jsx(MyProfile, {\n      profile: props.data.profile[0],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 25\n      }\n    }), userid !== props.data.profile[0]._id && props.data !== undefined && __jsx(PublicProfile, {\n      profile: props.data.profile[0],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 25\n      }\n    })));\n  }\n};\n\nProfile.getInitialProps = async ctx => {\n  const url = \"http://localhost:9000/profiles/profile?userid=\" + ctx.query._id;\n  const res = await fetch(url);\n  const data = await res.json();\n  console.log(data);\n  return {\n    props: {\n      data\n    }\n  };\n};\n\nexport default Profile;","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/Front-End/pages/Profiles/[_id].js"],"names":["Head","Header","useState","useEffect","Spin","Skeleton","jwt","MyProfile","PublicProfile","Profile","props","console","log","userid","setData","loading","setLoading","token","window","localStorage","getItem","verify","err","decoded","userId","location","href","replace","position","top","left","marginTop","marginLeft","data","profile","_id","undefined","getInitialProps","ctx","url","query","res","fetch","json"],"mappings":";;;AAAA,OAAOA,IAAP,MAAiB,uBAAjB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,SAAQC,QAAR,EAAmBC,SAAnB,QAAmC,OAAnC;AACA,SAAQC,IAAR,EAAeC,QAAf,QAA8B,MAA9B;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;;AAEA,MAAMC,OAAO,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAW;AAEvBC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,QAAM;AAAA,OAACG,MAAD;AAAA,OAAQC;AAAR,MAAmBZ,QAAQ,EAAjC;AACA,QAAM;AAAA,OAACa,OAAD;AAAA,OAASC;AAAT,MAAuBd,QAAQ,CAAC,IAAD,CAArC;AAEAC,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMc,KAAK,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,CAAd;AACAd,IAAAA,GAAG,CAACe,MAAJ,CAAWJ,KAAX,EAAiB,QAAjB,EAA0B,UAAUK,GAAV,EAAgBC,OAAhB,EAAyB;AAC/C,UAAI,CAACD,GAAL,EAAU;AACNR,QAAAA,OAAO,CAACS,OAAO,CAACC,MAAT,CAAP;AACAR,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH,OAHD,MAIA;AACIL,QAAAA,OAAO,CAACC,GAAR,CAAYU,GAAZ;AACA,cAAMG,QAAQ,GAAG,6CAA2CP,MAAM,CAACO,QAAP,CAAgBC,IAA5E;AACAR,QAAAA,MAAM,CAACO,QAAP,CAAgBE,OAAhB,CAAwBF,QAAxB;AACH;AACJ,KAVD;AAYH,GAdQ,EAcP,EAdO,CAAT;;AAeA,MAAIV,OAAJ,EAAc;AAEV,WACA,4BACQ,MAAC,IAAD;AAAM,MAAA,KAAK,EAAC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADR,EAEQ;AAAK,MAAA,KAAK,EAAE;AAACa,QAAAA,QAAQ,EAAG,OAAZ;AAAoBC,QAAAA,GAAG,EAAG,KAA1B;AAAgCC,QAAAA,IAAI,EAAC,KAArC;AAA2CC,QAAAA,SAAS,EAAE,OAAtD;AAA8DC,QAAAA,UAAU,EAAC;AAAzE,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,IAAD;AAAM,MAAA,IAAI,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFR,CADA;AAQH,GAVD,MAUK;AACD,WACI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACQ,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADR,EAEQ,MAAC,QAAD;AAAU,MAAA,OAAO,EAAE,IAAnB;AAAyB,MAAA,MAAM,EAAE,IAAjC;AAAuC,MAAA,MAAM,EAAE,IAA/C;AAAqD,MAAA,KAAK,MAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGnB,MAAM,KAAKH,KAAK,CAACuB,IAAN,CAAWC,OAAX,CAAmB,CAAnB,EAAsBC,GAAjC,IAAwCzB,KAAK,CAACuB,IAAN,KAAeG,SAAvD,IACC,MAAC,SAAD;AAAW,MAAA,OAAO,EAAE1B,KAAK,CAACuB,IAAN,CAAWC,OAAX,CAAmB,CAAnB,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAIGrB,MAAM,KAAKH,KAAK,CAACuB,IAAN,CAAWC,OAAX,CAAmB,CAAnB,EAAsBC,GAAjC,IAAwCzB,KAAK,CAACuB,IAAN,KAAeG,SAAvD,IACC,MAAC,aAAD;AAAe,MAAA,OAAO,EAAE1B,KAAK,CAACuB,IAAN,CAAWC,OAAX,CAAmB,CAAnB,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,CAFR,CADJ;AAaH;AAEJ,CA/CD;;AAkDAzB,OAAO,CAAC4B,eAAR,GAA0B,MAAOC,GAAP,IAAe;AAErC,QAAMC,GAAG,GAAG,mDAAiDD,GAAG,CAACE,KAAJ,CAAUL,GAAvE;AACA,QAAMM,GAAG,GAAG,MAAMC,KAAK,CAACH,GAAD,CAAvB;AACA,QAAMN,IAAI,GAAG,MAAMQ,GAAG,CAACE,IAAJ,EAAnB;AACAhC,EAAAA,OAAO,CAACC,GAAR,CAAYqB,IAAZ;AACA,SAAM;AACHvB,IAAAA,KAAK,EAAG;AACJuB,MAAAA;AADI;AADL,GAAN;AAKD,CAXH;;AAaA,eAAexB,OAAf","sourcesContent":["import Head from '../../components/head';\r\nimport Header from '../../components/header'\r\nimport {useState , useEffect} from 'react';\r\nimport {Spin , Skeleton} from 'antd';\r\nimport jwt from 'jsonwebtoken';\r\nimport MyProfile from './Components/myProfile';\r\nimport PublicProfile from './Components/publicProfile';\r\n\r\nconst Profile = ({props})=>{\r\n\r\n    console.log(props);\r\n    const [userid,setData] = useState();\r\n    const [loading,setLoading] = useState(true);\r\n\r\n    useEffect(()=>{\r\n        const token = window.localStorage.getItem(\"Tokens\");\r\n        jwt.verify(token,\"secret\",function (err , decoded) {\r\n            if (!err) {\r\n                setData(decoded.userId);\r\n                setLoading(false);\r\n            }else\r\n            {\r\n                console.log(err);\r\n                const location = \"/Auth/Signin/?ref=tokenexpired&location=\"+window.location.href;\r\n                window.location.replace(location);\r\n            }\r\n        });\r\n        \r\n    },[])\r\n    if (loading ) {\r\n        \r\n        return(\r\n        <>\r\n                <Head title=\"Loading\"/>\r\n                <div style={{position : 'fixed',top : '50%',left:'50%',marginTop :'-50px',marginLeft:'-50px'}}>\r\n                    <Spin size=\"large\" />\r\n                </div>\r\n        </>\r\n        )\r\n    }else{\r\n        return(\r\n            <div className=\"body\">\r\n                    <Header/>\r\n                    <Skeleton loading={true} active={true} avatar={true} round>\r\n                      {userid === props.data.profile[0]._id && props.data !== undefined &&  (\r\n                        <MyProfile profile={props.data.profile[0]}/>\r\n                      )}\r\n                      {userid !== props.data.profile[0]._id && props.data !== undefined && (\r\n                        <PublicProfile profile={props.data.profile[0]}/>\r\n                      )}  \r\n                    </Skeleton>\r\n            </div>\r\n        )        \r\n    }\r\n    \r\n}\r\n\r\n\r\nProfile.getInitialProps = async (ctx) => {\r\n\r\n    const url = \"http://localhost:9000/profiles/profile?userid=\"+ctx.query._id ;\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n    console.log(data);\r\n    return{\r\n       props : {\r\n           data\r\n       }\r\n    }\r\n  }\r\n\r\nexport default Profile ;"]},"metadata":{},"sourceType":"module"}