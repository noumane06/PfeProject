{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport Header from '../../components/header';\nimport Head from '../../components/head';\nimport Footer from '../../components/footer';\nimport './Scss/search.scss';\nimport { useRouter } from 'next/router';\nimport { Skeleton } from 'antd';\nimport axios from 'axios'; // ------------------------------------------------\n\nimport SearchCard from '../../components/SearchCard';\nimport SearchBar from '../../components/SearchBar'; //--------------------------------------------------\n\nconst Search = ({\n  qu\n}) => {\n  const {\n    0: profiles,\n    1: setProfile\n  } = useState();\n  const {\n    0: nodata,\n    1: setnodata\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const router = useRouter();\n  useEffect(() => {\n    const Url = '/api/profiles/search?companyname=' + qu.companyname + '&domaine=' + qu.domaine + '&city=' + qu.city + '&page=' + qu.page;\n    axios.get(Url).then(res => {\n      console.log(res);\n      setProfile(res.data);\n\n      if (res.data === \"\") {\n        setnodata(true);\n      }\n\n      setLoading(false);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  const handleCLick = async () => {\n    setLoading(true);\n\n    if (+qu.page < Math.round(profiles.count / 9) && +qu.page !== 0) {\n      var newPage = +qu.page + 1;\n      await router.push('/Search?companyname=' + qu.companyname + '&domaine=' + qu.domaine + '&city=' + qu.city + '&page=' + newPage);\n    }\n\n    const Url = '/api/profiles/search?companyname=' + qu.companyname + '&domaine=' + qu.domaine + '&city=' + qu.city + '&page=' + qu.page;\n    axios.get(Url).then(res => {\n      setProfile(res.data);\n\n      if (res.data === \"\") {\n        setnodata(true);\n      }\n\n      setLoading(false);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const handleBack = () => {\n    setLoading(true);\n    var newPage = +qu.page - 1;\n    router.push('/Search?companyname=' + qu.companyname + '&domaine=' + qu.domaine + '&city=' + qu.city + '&page=' + newPage);\n    const Url = '/api/profiles/search?companyname=' + qu.companyname + '&domaine=' + qu.domaine + '&city=' + qu.city + '&page=' + qu.page;\n    axios.get(Url).then(res => {\n      setProfile(res.data);\n\n      if (res.data === \"\") {\n        setnodata(true);\n      }\n\n      setLoading(false);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"body\"\n  }, __jsx(\"div\", {\n    className: \"ContentInside\"\n  }, __jsx(Head, {\n    title: \"Resulat de recherche | 6 solutions\"\n  }), __jsx(Header, null), __jsx(\"div\", {\n    className: \"searchPage\"\n  }, __jsx(SearchBar, {\n    searchItem: qu\n  })), __jsx(\"div\", {\n    className: \"loader\"\n  }, __jsx(Skeleton, {\n    loading: loading,\n    active: true,\n    avatar: true,\n    round: true,\n    className: \"sk\"\n  }, profiles !== undefined && __jsx(React.Fragment, null, profiles.profile !== undefined && __jsx(\"div\", {\n    className: \"CardContainer\"\n  }, profiles.profile.map(profile => __jsx(React.Fragment, null, __jsx(SearchCard, {\n    key: profile._id,\n    className: \"SearchCard1\",\n    profile: profile\n  })))), nodata && __jsx(\"div\", {\n    className: \"Noresults\"\n  }, __jsx(\"img\", {\n    src: \"/static/Assets/No_comments.png\",\n    height: \"300\"\n  }), __jsx(\"h2\", null, \"Aucun r\\xE9sultat trouv\\xE9\"), __jsx(\"p\", null, \"Il semble que nous ne trouvons aucun r\\xE9sultat bas\\xE9 sur la recherche.\")), __jsx(\"div\", {\n    className: \"pagination\"\n  }, __jsx(\"button\", {\n    className: qu.page <= 1 || profiles.count === undefined ? \"disabled test\" : \"backPage test\",\n    onClick: handleBack\n  }, \"Pr\\xE9c\\xE9dent\"), profiles.count !== undefined && __jsx(\"span\", {\n    className: \"pageNumber test \"\n  }, qu.page, \" sur \", Math.round(profiles.count / 9) !== 0 ? Math.round(profiles.count / 9) : 1), profiles.count === undefined && __jsx(\"span\", {\n    className: \"pageNumber test \"\n  }, \"-\"), __jsx(\"button\", {\n    className: qu.page >= Math.round(profiles.count / 9) || profiles.count === undefined ? \"disabled test \" : \"nextPage test \",\n    onClick: handleCLick\n  }, \"Suivant\"))))))), !loading && __jsx(Footer, null));\n};\n\nSearch.getInitialProps = async ({\n  query\n}) => {\n  return {\n    props: \"\",\n    qu: query\n  };\n};\n\nexport default Search;","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/FrontEnd/pages/Search/index.js"],"names":["useEffect","useState","Header","Head","Footer","useRouter","Skeleton","axios","SearchCard","SearchBar","Search","qu","profiles","setProfile","nodata","setnodata","loading","setLoading","router","Url","companyname","domaine","city","page","get","then","res","console","log","data","catch","err","handleCLick","Math","round","count","newPage","push","handleBack","undefined","profile","map","_id","getInitialProps","query","props"],"mappings":";;AAAA,SAAQA,SAAR,EAAoBC,QAApB,QAAmC,OAAnC;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAO,oBAAP;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,SAAP,MAAsB,4BAAtB,C,CACA;;AACA,MAAMC,MAAM,GAAE,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAQ;AAElB,QAAM;AAAA,OAACC,QAAD;AAAA,OAAYC;AAAZ,MAA0BZ,QAAQ,EAAxC;AACA,QAAM;AAAA,OAACa,MAAD;AAAA,OAASC;AAAT,MAAsBd,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM;AAAA,OAACe,OAAD;AAAA,OAAUC;AAAV,MAAwBhB,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAMiB,MAAM,GAAGb,SAAS,EAAxB;AACAL,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMmB,GAAG,GAAG,sCAAoCR,EAAE,CAACS,WAAvC,GAAmD,WAAnD,GAA+DT,EAAE,CAACU,OAAlE,GAA0E,QAA1E,GAAmFV,EAAE,CAACW,IAAtF,GAA2F,QAA3F,GAAoGX,EAAE,CAACY,IAAnH;AACAhB,IAAAA,KAAK,CAACiB,GAAN,CAAUL,GAAV,EACCM,IADD,CACMC,GAAG,IAAG;AACRC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAb,MAAAA,UAAU,CAACa,GAAG,CAACG,IAAL,CAAV;;AACA,UAAIH,GAAG,CAACG,IAAJ,KAAa,EAAjB,EAAqB;AACjBd,QAAAA,SAAS,CAAC,IAAD,CAAT;AACH;;AACDE,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KARD,EASCa,KATD,CASOC,GAAG,IAAG;AACTJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACH,KAXD;AAaH,GAfQ,EAeP,EAfO,CAAT;;AAiBA,QAAMC,WAAW,GAAG,YAAU;AAC1Bf,IAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,QAAI,CAACN,EAAE,CAACY,IAAJ,GAAWU,IAAI,CAACC,KAAL,CAAWtB,QAAQ,CAACuB,KAAT,GAAgB,CAA3B,CAAX,IAA4C,CAACxB,EAAE,CAACY,IAAJ,KAAa,CAA7D,EAAkE;AAC9D,UAAIa,OAAO,GAAG,CAACzB,EAAE,CAACY,IAAJ,GAAS,CAAvB;AACD,YAAML,MAAM,CAACmB,IAAP,CAAY,yBAAuB1B,EAAE,CAACS,WAA1B,GAAsC,WAAtC,GAAkDT,EAAE,CAACU,OAArD,GAA6D,QAA7D,GAAsEV,EAAE,CAACW,IAAzE,GAA8E,QAA9E,GAAuFc,OAAnG,CAAN;AACF;;AACD,UAAMjB,GAAG,GAAG,sCAAoCR,EAAE,CAACS,WAAvC,GAAmD,WAAnD,GAA+DT,EAAE,CAACU,OAAlE,GAA0E,QAA1E,GAAmFV,EAAE,CAACW,IAAtF,GAA2F,QAA3F,GAAoGX,EAAE,CAACY,IAAnH;AACAhB,IAAAA,KAAK,CAACiB,GAAN,CAAUL,GAAV,EACCM,IADD,CACMC,GAAG,IAAG;AACRb,MAAAA,UAAU,CAACa,GAAG,CAACG,IAAL,CAAV;;AACA,UAAIH,GAAG,CAACG,IAAJ,KAAa,EAAjB,EAAqB;AACjBd,QAAAA,SAAS,CAAC,IAAD,CAAT;AACH;;AACDE,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAPD,EAQCa,KARD,CAQOC,GAAG,IAAG;AACTJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACH,KAVD;AAYH,GAnBD;;AAoBA,QAAMO,UAAU,GAAG,MAAI;AACnBrB,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAImB,OAAO,GAAG,CAACzB,EAAE,CAACY,IAAJ,GAAS,CAAvB;AACAL,IAAAA,MAAM,CAACmB,IAAP,CAAY,yBAAuB1B,EAAE,CAACS,WAA1B,GAAsC,WAAtC,GAAkDT,EAAE,CAACU,OAArD,GAA6D,QAA7D,GAAsEV,EAAE,CAACW,IAAzE,GAA8E,QAA9E,GAAuFc,OAAnG;AACA,UAAMjB,GAAG,GAAG,sCAAoCR,EAAE,CAACS,WAAvC,GAAmD,WAAnD,GAA+DT,EAAE,CAACU,OAAlE,GAA0E,QAA1E,GAAmFV,EAAE,CAACW,IAAtF,GAA2F,QAA3F,GAAoGX,EAAE,CAACY,IAAnH;AACAhB,IAAAA,KAAK,CAACiB,GAAN,CAAUL,GAAV,EACCM,IADD,CACMC,GAAG,IAAG;AACRb,MAAAA,UAAU,CAACa,GAAG,CAACG,IAAL,CAAV;;AACA,UAAIH,GAAG,CAACG,IAAJ,KAAa,EAAjB,EAAqB;AACjBd,QAAAA,SAAS,CAAC,IAAD,CAAT;AACH;;AACDE,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAPD,EAQCa,KARD,CAQOC,GAAG,IAAG;AACTJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACH,KAVD;AAWH,GAhBD;;AAiBA,SACI,4BACA;AAAK,IAAA,SAAS,EAAC;AAAf,KACI;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,MAAC,IAAD;AAAM,IAAA,KAAK,EAAC;AAAZ,IADD,EAEC,MAAC,MAAD,OAFD,EAGC;AAAK,IAAA,SAAS,EAAC;AAAf,KACG,MAAC,SAAD;AAAW,IAAA,UAAU,EAAEpB;AAAvB,IADH,CAHD,EAMC;AAAK,IAAA,SAAS,EAAC;AAAf,KACI,MAAC,QAAD;AAAU,IAAA,OAAO,EAAEK,OAAnB;AAA4B,IAAA,MAAM,EAAE,IAApC;AAA0C,IAAA,MAAM,EAAE,IAAlD;AAAwD,IAAA,KAAK,MAA7D;AAA+D,IAAA,SAAS,EAAC;AAAzE,KACIJ,QAAQ,KAAK2B,SAAb,IACG,4BACC3B,QAAQ,CAAC4B,OAAT,KAAqBD,SAArB,IACG;AAAK,IAAA,SAAS,EAAC;AAAf,KACK3B,QAAQ,CAAC4B,OAAT,CAAiBC,GAAjB,CAAqBD,OAAO,IACrB,4BACA,MAAC,UAAD;AAAY,IAAA,GAAG,EAAEA,OAAO,CAACE,GAAzB;AAA8B,IAAA,SAAS,EAAC,aAAxC;AAAsD,IAAA,OAAO,EAAEF;AAA/D,IADA,CADP,CADL,CAFJ,EAWC1B,MAAM,IACK;AAAK,IAAA,SAAS,EAAC;AAAf,KACQ;AAAK,IAAA,GAAG,EAAC,gCAAT;AAA0C,IAAA,MAAM,EAAC;AAAjD,IADR,EAEQ,gDAFR,EAGQ,8FAHR,CAZZ,EAmBA;AAAK,IAAA,SAAS,EAAC;AAAf,KACQ;AAAQ,IAAA,SAAS,EAAEH,EAAE,CAACY,IAAH,IAAU,CAAV,IAAeX,QAAQ,CAACuB,KAAT,KAAmBI,SAAlC,GAA+C,eAA/C,GAAiE,eAApF;AAAqG,IAAA,OAAO,EAAED;AAA9G,uBADR,EAES1B,QAAQ,CAACuB,KAAT,KAAmBI,SAAnB,IAAgC;AAAM,IAAA,SAAS,EAAC;AAAhB,KAAoC5B,EAAE,CAACY,IAAvC,WAAkDU,IAAI,CAACC,KAAL,CAAWtB,QAAQ,CAACuB,KAAT,GAAgB,CAA3B,MAAkC,CAAlC,GAAuCF,IAAI,CAACC,KAAL,CAAWtB,QAAQ,CAACuB,KAAT,GAAgB,CAA3B,CAAvC,GAAuE,CAAzH,CAFzC,EAGSvB,QAAQ,CAACuB,KAAT,KAAmBI,SAAnB,IAAgC;AAAM,IAAA,SAAS,EAAC;AAAhB,SAHzC,EAIQ;AAAQ,IAAA,SAAS,EAAE5B,EAAE,CAACY,IAAH,IAAWU,IAAI,CAACC,KAAL,CAAWtB,QAAQ,CAACuB,KAAT,GAAiB,CAA5B,CAAX,IAA6CvB,QAAQ,CAACuB,KAAT,KAAmBI,SAAhE,GAA4E,gBAA5E,GAA+F,gBAAlH;AAAqI,IAAA,OAAO,EAAEP;AAA9I,eAJR,CAnBA,CAFP,CADJ,CAND,CADJ,CADA,EA0CC,CAAChB,OAAD,IAAa,MAAC,MAAD,OA1Cd,CADJ;AA+CH,CA3GD;;AA6GAN,MAAM,CAACiC,eAAP,GAAyB,OAAO;AAAEC,EAAAA;AAAF,CAAP,KAAqB;AAEzC,SAAO;AAACC,IAAAA,KAAK,EAAG,EAAT;AAAclC,IAAAA,EAAE,EAAGiC;AAAnB,GAAP;AACJ,CAHD;;AAKA,eAAelC,MAAf","sourcesContent":["import {useEffect , useState} from 'react';\r\nimport Header from '../../components/header';\r\nimport Head from '../../components/head';\r\nimport Footer from '../../components/footer';\r\nimport './Scss/search.scss';\r\nimport { useRouter } from 'next/router';\r\nimport { Skeleton } from 'antd';\r\nimport axios from 'axios'\r\n// ------------------------------------------------\r\nimport SearchCard from '../../components/SearchCard';\r\nimport SearchBar from '../../components/SearchBar';\r\n//--------------------------------------------------\r\nconst Search =({qu})=>{\r\n\r\n    const [profiles , setProfile] = useState();\r\n    const [nodata ,setnodata] = useState(false);\r\n    const [loading ,setLoading] = useState(true);\r\n    const router = useRouter()\r\n    useEffect(()=>{\r\n        const Url = '/api/profiles/search?companyname='+qu.companyname+'&domaine='+qu.domaine+'&city='+qu.city+'&page='+qu.page;\r\n        axios.get(Url)\r\n        .then(res =>{\r\n            console.log(res);\r\n            setProfile(res.data);\r\n            if (res.data === \"\") {\r\n                setnodata(true);\r\n            }\r\n            setLoading(false);\r\n        })\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n        \r\n    },[])\r\n\r\n    const handleCLick = async ()=>{\r\n        setLoading(true);\r\n        if (+qu.page < Math.round(profiles.count /9) && +qu.page !== 0  ) {\r\n            var newPage = +qu.page+1\r\n           await router.push('/Search?companyname='+qu.companyname+'&domaine='+qu.domaine+'&city='+qu.city+'&page='+newPage)\r\n        }\r\n        const Url = '/api/profiles/search?companyname='+qu.companyname+'&domaine='+qu.domaine+'&city='+qu.city+'&page='+qu.page\r\n        axios.get(Url)\r\n        .then(res =>{\r\n            setProfile(res.data);\r\n            if (res.data === \"\") {\r\n                setnodata(true);\r\n            }\r\n            setLoading(false);\r\n        })\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n        \r\n    }\r\n    const handleBack = ()=>{\r\n        setLoading(true);\r\n        var newPage = +qu.page-1\r\n        router.push('/Search?companyname='+qu.companyname+'&domaine='+qu.domaine+'&city='+qu.city+'&page='+newPage);\r\n        const Url = '/api/profiles/search?companyname='+qu.companyname+'&domaine='+qu.domaine+'&city='+qu.city+'&page='+qu.page\r\n        axios.get(Url)\r\n        .then(res =>{\r\n            setProfile(res.data);\r\n            if (res.data === \"\") {\r\n                setnodata(true);\r\n            }\r\n            setLoading(false);\r\n        })\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n    return(\r\n        <>\r\n        <div className=\"body\">\r\n            <div className=\"ContentInside\">\r\n             <Head title=\"Resulat de recherche | 6 solutions\" />\r\n             <Header />\r\n             <div className=\"searchPage\">\r\n                <SearchBar searchItem={qu}/>\r\n             </div>\r\n             <div className='loader'>\r\n                 <Skeleton loading={loading} active={true} avatar={true} round  className='sk'>\r\n                    {profiles !== undefined &&(\r\n                        <>\r\n                        {profiles.profile !== undefined  &&(\r\n                            <div className=\"CardContainer\">\r\n                                {profiles.profile.map(profile=>(\r\n                                        <>\r\n                                        <SearchCard key={profile._id} className=\"SearchCard1\" profile={profile}/>\r\n                                        </>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                        \r\n                        {nodata  &&(\r\n                                    <div className=\"Noresults\">\r\n                                            <img src=\"/static/Assets/No_comments.png\" height=\"300\"/>\r\n                                            <h2>Aucun résultat trouvé</h2>\r\n                                            <p>Il semble que nous ne trouvons aucun résultat basé sur la recherche.</p>\r\n                                    </div>\r\n                        )}\r\n                            \r\n                        <div className=\"pagination\">\r\n                                <button className={qu.page <=1 || profiles.count === undefined  ? \"disabled test\" : \"backPage test\"} onClick={handleBack}>Précédent</button>\r\n                                {profiles.count !== undefined &&(<span className=\"pageNumber test \">{qu.page} sur {Math.round(profiles.count /9) !== 0  ? Math.round(profiles.count /9) : 1 }</span>)}\r\n                                {profiles.count === undefined &&(<span className=\"pageNumber test \">-</span>)}\r\n                                <button className={qu.page >= Math.round(profiles.count / 9) || profiles.count === undefined ? \"disabled test \" : \"nextPage test \" } onClick={handleCLick}>Suivant</button>\r\n                        </div>\r\n                        </>\r\n                    )}\r\n                </Skeleton>\r\n             </div>\r\n            </div>\r\n        </div>\r\n        {!loading && (<Footer />)}\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nSearch.getInitialProps = async ({ query }) => {\r\n    \r\n     return {props : \"\" , qu : query}\r\n}\r\n\r\nexport default Search ;"]},"metadata":{},"sourceType":"module"}