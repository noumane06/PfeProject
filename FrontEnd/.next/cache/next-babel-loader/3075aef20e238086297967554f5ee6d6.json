{"ast":null,"code":"var __jsx = React.createElement;\nimport { AutoComplete } from 'antd';\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../styles/AutoComplete.scss';\nimport '../styles/ant-picker.scss';\n\nvar SearchBar = function SearchBar(_ref) {\n  var searchItem = _ref.searchItem;\n  var Option = AutoComplete.Option;\n\n  var _useState = useState([]),\n      nameOptions = _useState[0],\n      setOptions = _useState[1];\n\n  var _useState2 = useState([]),\n      Names = _useState2[0],\n      setNames = _useState2[1];\n\n  var _useState3 = useState([]),\n      CityOptions = _useState3[0],\n      setCityOptions = _useState3[1];\n\n  var _useState4 = useState([]),\n      DomaineOptions = _useState4[0],\n      setDomaineOptions = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      nameText = _useState5[0],\n      setNametext = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      domaineText = _useState6[0],\n      setdomainetext = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      cityText = _useState7[0],\n      setcitytext = _useState7[1];\n\n  var checker = function checker(array) {\n    var els = [];\n    array.map(function (element) {\n      return element.domaine.map(function (dom) {\n        els.includes(dom) ? 'null' : els.push(dom);\n      });\n    });\n    return els;\n  };\n\n  var onSearchName = function onSearchName(searchText) {\n    setNametext(searchText);\n    var Url = 'http://15.237.56.214:9000/profiles/search?companyname=' + nameText + '&domaine=' + domaineText + '&city=' + cityText + '&page=1';\n    axios.get(Url).then(function (_ref2) {\n      var data = _ref2.data;\n\n      if (data !== undefined) {\n        setNames(data.profile);\n\n        if (Names.length !== 0) {\n          setOptions(!searchText ? [] : Names);\n        }\n      }\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  };\n\n  var onSearchCities = function onSearchCities(searchText) {\n    setcitytext(searchText);\n    var Url = 'http://15.237.56.214:9000/profiles/search?companyname=' + nameText + '&domaine=' + domaineText + '&city=' + cityText + '&page=1';\n    axios.get(Url).then(function (_ref3) {\n      var data = _ref3.data;\n\n      if (data !== undefined) {\n        setNames(data.profile);\n\n        if (Names.length !== 0) {\n          setCityOptions(!searchText ? [] : Names.filter(function (em) {\n            return em.city.includes(searchText.toLowerCase());\n          }));\n        }\n      }\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  };\n\n  var onSelectName = function onSelectName(data) {\n    setNametext(data);\n  };\n\n  var onSelectDomaine = function onSelectDomaine(data) {\n    setdomainetext(data);\n  };\n\n  var onSelectCity = function onSelectCity(data) {\n    setcitytext(data);\n  };\n\n  var onSearchDomaine = function onSearchDomaine(searchText) {\n    setdomainetext(searchText);\n    var Url = 'http://15.237.56.214:9000/profiles/search?companyname=' + nameText + '&domaine=' + domaineText + '&city=' + cityText + '&page=1';\n    axios.get(Url).then(function (_ref4) {\n      var data = _ref4.data;\n\n      if (data !== undefined) {\n        setNames(data.profile);\n\n        if (Names.length !== 0) {\n          setDomaineOptions(!searchText ? [] : checker(Names));\n        }\n      }\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  };\n\n  useEffect(function () {\n    if (searchItem !== undefined) {\n      setNametext(searchItem.companyname);\n      setdomainetext(searchItem.domaine);\n      setcitytext(searchItem.city);\n    }\n  }, []);\n  return __jsx(\"div\", {\n    className: \"search_Container\"\n  }, __jsx(\"div\", {\n    className: \"inputContainer\"\n  }, __jsx(\"i\", {\n    \"aria-hidden\": true,\n    className: \"fa fa-id-card icon\"\n  }), __jsx(AutoComplete, {\n    className: \"searchInput\",\n    onSelect: onSelectName,\n    onSearch: onSearchName,\n    value: nameText,\n    placeholder: \"Soci\\xE9t\\xE9/Personne\"\n  }, nameOptions.map(function (name) {\n    return __jsx(Option, {\n      key: name.companyname,\n      value: name.companyname\n    }, name.companyname);\n  }))), __jsx(\"div\", {\n    className: \"inputContainer\"\n  }, __jsx(\"i\", {\n    \"aria-hidden\": true,\n    className: \"fa fa-globe icon\"\n  }), __jsx(AutoComplete, {\n    className: \"searchInput\",\n    value: domaineText,\n    onSelect: onSelectDomaine,\n    onSearch: onSearchDomaine,\n    placeholder: \"Domaine\"\n  }, DomaineOptions.map(function (domaine) {\n    return __jsx(Option, {\n      key: domaine,\n      value: domaine\n    }, domaine);\n  }))), __jsx(\"div\", {\n    className: \"inputContainer\"\n  }, __jsx(\"i\", {\n    \"aria-hidden\": true,\n    className: \"fa fa-map-marker icon\"\n  }), __jsx(AutoComplete, {\n    className: \"searchInput\",\n    onSelect: onSelectCity,\n    onSearch: onSearchCities,\n    placeholder: \"Ville\",\n    value: cityText\n  }, CityOptions.map(function (element) {\n    return __jsx(Option, {\n      key: element.city,\n      value: element.city\n    }, element.city);\n  }))), __jsx(\"a\", {\n    className: \"searchButton\",\n    type: \"button\",\n    href: '/Search?companyname=' + nameText + '&domaine=' + domaineText + '&city=' + cityText + '&page=1'\n  }, __jsx(\"i\", {\n    \"aria-hidden\": true,\n    className: \"fa fa-search\"\n  })));\n};\n\nexport default SearchBar;","map":null,"metadata":{},"sourceType":"module"}