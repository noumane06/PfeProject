{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Noumane agouzil\\\\Desktop\\\\Normane\\\\My projects\\\\PfeProject\\\\Front-End\\\\pages\\\\Profiles\\\\[_id].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from '../../components/head';\nimport Header from '../../components/header';\nimport { useState, useEffect } from 'react';\nimport { Spin } from 'antd';\nimport jwt from 'jsonwebtoken';\nimport PublicProfile from './Components/publicProfile';\nimport axios from 'axios';\n\nconst Profile = ({\n  props,\n  authUsr\n}) => {\n  const {\n    0: userid,\n    1: setData\n  } = useState();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  useEffect(() => {\n    // if (authUsr !== undefined ) {\n    //     setData(authUsr);\n    //     setLoading(false);\n    // }else{\n    //     console.log(props.data.error)\n    //     const location = \"/Auth/Signin/?ref=tokenexpired&location=\"+window.location.href;\n    //     window.location.replace(location);\n    // }\n    console.log(props, authUsr);\n  }, []);\n\n  if (loading) {\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      title: \"Loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        marginTop: '-50px',\n        marginLeft: '-50px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 17\n      }\n    }, __jsx(Spin, {\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 21\n      }\n    })));\n  } else {\n    return __jsx(\"div\", {\n      className: \"body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 13\n      }\n    }, __jsx(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 21\n      }\n    }), props.data === undefined ? __jsx(Head, {\n      title: \"Loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 49\n      }\n    }) : '', __jsx(\"div\", {\n      style: {\n        marginTop: '8%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 21\n      }\n    }, props.data !== undefined && __jsx(PublicProfile, {\n      profile: props.data.profile[0],\n      userid: userid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 29\n      }\n    })));\n  }\n};\n\nProfile.getInitialProps = async ctx => {\n  const Authdata = {};\n  axios.get('http://localhost:9000/profiles/myprofile', {\n    withCredentials: true\n  }).then(res => {\n    Authdata = res.data.profile;\n    return {\n      props: {\n        Authdata\n      },\n      authUsr: \"\"\n    };\n  }).catch(err => {\n    return {\n      props: {\n        err\n      },\n      authUsr: \"\"\n    };\n  }); // const Authres = await Axios.get('http://localhost:9000/profiles/myprofile', {withCredentials : true});\n  // // const Authdata = await Authres.json();\n  // const usrAuth = Authres.profile ;\n  // if (ctx.query._id !== 'Myprofile') {\n  //     const url = \"http://localhost:9000/profiles/profile?userid=\"+ctx.query._id ;\n  //     const res = await fetch(url);\n  //     Authdata = await res.json();\n  // } \n};\n\nexport default Profile;","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/Front-End/pages/Profiles/[_id].js"],"names":["Head","Header","useState","useEffect","Spin","jwt","PublicProfile","axios","Profile","props","authUsr","userid","setData","loading","setLoading","console","log","position","top","left","marginTop","marginLeft","data","undefined","profile","getInitialProps","ctx","Authdata","get","withCredentials","then","res","catch","err"],"mappings":"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","sourcesContent":["import Head from '../../components/head';\r\nimport Header from '../../components/header'\r\nimport {useState , useEffect} from 'react';\r\nimport {Spin } from 'antd';\r\nimport jwt from 'jsonwebtoken';\r\nimport PublicProfile from './Components/publicProfile';\r\nimport axios from 'axios';\r\n\r\nconst Profile = ({props , authUsr})=>{\r\n\r\n    const [userid,setData] = useState();\r\n    const [loading,setLoading] = useState(true);\r\n\r\n    useEffect(()=>{\r\n        // if (authUsr !== undefined ) {\r\n        //     setData(authUsr);\r\n        //     setLoading(false);\r\n        // }else{\r\n        //     console.log(props.data.error)\r\n        //     const location = \"/Auth/Signin/?ref=tokenexpired&location=\"+window.location.href;\r\n        //     window.location.replace(location);\r\n        // }\r\n        console.log(props,authUsr);\r\n    },[])\r\n    if (loading ) {\r\n        \r\n        return(\r\n        <>\r\n                <Head title=\"Loading\"/>\r\n                <div style={{position : 'fixed',top : '50%',left:'50%',marginTop :'-50px',marginLeft:'-50px'}}>\r\n                    <Spin size=\"large\" />\r\n                </div>\r\n        </>\r\n        )\r\n    }else{\r\n        return(\r\n            <div className=\"body\">\r\n                    <Header/>\r\n                    {props.data === undefined ? <Head title=\"Loading\"/> :''}\r\n                    <div style={{marginTop :'8%'}}>\r\n                        { props.data !== undefined && (\r\n                            <PublicProfile profile={props.data.profile[0]} userid={userid} />\r\n                        )}  \r\n                    </div>\r\n            </div>\r\n        )        \r\n    }\r\n    \r\n}\r\n\r\n\r\nProfile.getInitialProps = async (ctx) => {\r\n\r\n    const Authdata = {}\r\n    axios.get('http://localhost:9000/profiles/myprofile',{withCredentials : true})\r\n        .then(res =>{    \r\n            Authdata =  res.data.profile ; \r\n            return {\r\n            props : {\r\n                Authdata\r\n            },\r\n            authUsr : \"\" \r\n            }\r\n         })\r\n        .catch(err => {\r\n            return {\r\n                props : {\r\n                    err\r\n                },\r\n                authUsr : \"\" \r\n            }\r\n        });\r\n    // const Authres = await Axios.get('http://localhost:9000/profiles/myprofile', {withCredentials : true});\r\n    // // const Authdata = await Authres.json();\r\n    // const usrAuth = Authres.profile ;\r\n    // if (ctx.query._id !== 'Myprofile') {\r\n    //     const url = \"http://localhost:9000/profiles/profile?userid=\"+ctx.query._id ;\r\n    //     const res = await fetch(url);\r\n    //     Authdata = await res.json();\r\n    // } \r\n        \r\n    \r\n  }\r\n\r\nexport default Profile ;"]},"metadata":{},"sourceType":"module"}