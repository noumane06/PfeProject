{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport '../styles/header.scss';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport ProfileIcon from './svg/profile.js';\nimport SettingsIcon from './svg/settings.js';\nimport LogoutIcon from './svg/logout.js';\nimport NotifBell from './svg/NotifBell';\nimport { Badge } from 'antd';\nimport ToggleIcon from './svg/ToggleIcon';\n\nconst DropdownItem = props => {\n  return __jsx(\"div\", {\n    className: \"menuItem\",\n    onClick: props.onClick\n  }, __jsx(\"span\", {\n    className: \"icon-button\"\n  }, props.lefticon), props.children);\n};\n\nconst DropDown = ({\n  userid,\n  count\n}) => {\n  const handleLogout = () => {\n    axios.get('http://localhost:9000/signout', {\n      withCredentials: true\n    }).then(res => window.location.reload()).catch(err => console.log(err));\n  };\n\n  return __jsx(\"div\", {\n    className: \"Dropdown\"\n  }, __jsx(DropdownItem, {\n    lefticon: __jsx(ProfileIcon, null)\n  }, __jsx(\"a\", {\n    href: `/Profiles/` + userid,\n    style: {\n      textDecoration: 'none'\n    }\n  }, \"Mon profile\")), __jsx(DropdownItem, {\n    lefticon: __jsx(SettingsIcon, null)\n  }, __jsx(\"a\", {\n    href: `/accountsett/`,\n    style: {\n      textDecoration: 'none'\n    }\n  }, \"Paremetres\")), __jsx(DropdownItem, {\n    lefticon: __jsx(Badge, {\n      count: count\n    }, __jsx(NotifBell, null))\n  }, __jsx(\"a\", {\n    href: `/Notifications/`,\n    style: {\n      textDecoration: 'none'\n    }\n  }, \"Notifications\")), __jsx(DropdownItem, {\n    lefticon: __jsx(LogoutIcon, null),\n    onClick: handleLogout\n  }, \"Se d\\xE9connecter\"));\n}; // Componenet  -------------------------------------------------------------\n\n\nconst Header = ({\n  active\n}) => {\n  const {\n    0: userId,\n    1: setToken\n  } = useState(null);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: checkStatus,\n    1: setCheckStatus\n  } = useState(false);\n  const {\n    0: opened,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: data,\n    1: setData\n  } = useState();\n  const count = data !== undefined ? data.NotifView : '';\n  useEffect(() => {\n    axios.get('http://localhost:9000/profiles/myprofile', {\n      withCredentials: true\n    }).then(res => {\n      setData(res.data.profile);\n      setLoading(false);\n      setToken(res.data.profile._id);\n    }).catch(err => {\n      setLoading(false);\n      setToken(null);\n      console.error(err);\n    });\n  }, []);\n\n  const handleClick = () => {\n    window.location.replace(\"/Auth/Signin\");\n  };\n\n  return __jsx(\"div\", {\n    className: \"Header_Container\"\n  }, __jsx(\"div\", {\n    className: \"NavSwitch\"\n  }, __jsx(\"label\", {\n    htmlFor: \"toggle\",\n    onClick: () => setCheckStatus(!checkStatus)\n  }, \" \", __jsx(ToggleIcon, null), \" \")), __jsx(\"div\", {\n    className: \"Header_Logo\"\n  }, __jsx(\"img\", {\n    src: \"../static/Icons/LOGO2017.png\",\n    height: \"30\",\n    onClick: () => window.location.assign(\"/\"),\n    style: {\n      cursor: 'pointer'\n    }\n  })), __jsx(\"div\", {\n    className: checkStatus ? \"GridNav visible\" : \"GridNav\"\n  }, __jsx(\"ul\", null, __jsx(\"li\", {\n    className: active == \"acceuil\" ? \"active\" : \"link\"\n  }, __jsx(\"a\", {\n    href: \"/\"\n  }, \"Acceuil\")), __jsx(\"li\", {\n    className: active == \"propos\" ? \"active\" : \"link\"\n  }, __jsx(\"a\", {\n    href: \"/propos\"\n  }, \"A propos\")), __jsx(\"li\", {\n    className: active == \"temoignages\" ? \"active\" : \"link\"\n  }, __jsx(\"a\", {\n    href: \"/temoignages\"\n  }, \"Temoignages\")), __jsx(\"li\", {\n    className: active == \"contact\" ? \"active\" : \"link\"\n  }, __jsx(\"a\", {\n    href: \"/contact\"\n  }, \"Contact\")), __jsx(\"li\", {\n    className: active == \"questions\" ? \"active\" : \"link\"\n  }, __jsx(\"a\", {\n    href: \"/questions\"\n  }, \"Questions\"))), __jsx(\"div\", {\n    className: \"Header_Buttons\"\n  }, !loading && userId === null && __jsx(React.Fragment, null, __jsx(\"input\", {\n    className: \"Header_subscribe\",\n    type: \"button\",\n    value: \"S'inscrire\",\n    onClick: () => window.location.replace(\"/Auth/SignUp\")\n  }), __jsx(\"input\", {\n    className: \"Header_signin\",\n    type: \"button\",\n    value: \"Se connecter\",\n    onClick: handleClick\n  })), !loading && userId !== null && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"ProfileThumb\",\n    onClick: () => setOpen(!opened)\n  }, __jsx(\"div\", {\n    className: \"ProfileImg\"\n  }, __jsx(Badge, {\n    count: count\n  }, __jsx(\"img\", {\n    src: data.Usrimg\n  }))), data.type == \"Société\" && __jsx(\"span\", null, data.companyname), data.type == \"Client\" && __jsx(\"span\", null, data.nom, \" \", data.prenom)), opened && __jsx(React.Fragment, null, __jsx(DropDown, {\n    userid: userId,\n    count: count\n  }))))));\n};\n\nexport default Header;","map":null,"metadata":{},"sourceType":"module"}