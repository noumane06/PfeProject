{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Noumane agouzil\\\\Desktop\\\\Normane\\\\My projects\\\\PfeProject\\\\Front-End\\\\pages\\\\Profiles\\\\[_id].js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Header from '../../components/header';\nimport Head from '../../components/head';\nimport { Spin } from 'antd';\nimport { useRouter } from 'next/router';\nimport { useState, useEffect } from 'react';\nimport jwt from 'jsonwebtoken';\nimport MyProfile from './Components/myProfile';\nimport PublicProfile from './Components/publicProfile';\n\nvar Profile = function Profile(_ref) {\n  _s();\n\n  var data = _ref.data;\n  var router = useRouter();\n\n  var _useState = useState(),\n      profile = _useState[0],\n      setprofile = _useState[1];\n\n  var _useState2 = useState(),\n      userid = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(true),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  useEffect(function () {\n    var token = window.localStorage.getItem(\"Tokens\");\n    jwt.verify(token, \"secret\", function (err, decoded) {\n      if (!err) {\n        setData(decoded.userId);\n        setLoading(false);\n      } else {\n        console.log(err);\n        var location = \"/Auth/Signin/?ref=tokenexpired&location=\" + window.location.href;\n        window.location.replace(location);\n      }\n    });\n  }, []);\n\n  if (router.isFallback) {\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      title: \"Loading\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        marginTop: '-50px',\n        marginLeft: '-50px'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }\n    }, __jsx(Spin, {\n      size: \"large\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 21\n      }\n    })));\n  } else {\n    setprofile(data.profile[0]);\n    return __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 13\n      }\n    }, userid === profile._id && __jsx(MyProfile, {\n      profile: profile,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 25\n      }\n    }), userid !== profile._id && __jsx(PublicProfile, {\n      profile: profile,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 25\n      }\n    }));\n  }\n};\n\n_s(Profile, \"Pw/vLCsg7gtAqSihlmV+sgFkK+8=\", false, function () {\n  return [useRouter];\n});\n\n_c = Profile;\nexport var __N_SSG = true;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/Front-End/pages/Profiles/[_id].js"],"names":["Header","Head","Spin","useRouter","useState","useEffect","jwt","MyProfile","PublicProfile","Profile","data","router","profile","setprofile","userid","setData","loading","setLoading","token","window","localStorage","getItem","verify","err","decoded","userId","console","log","location","href","replace","isFallback","position","top","left","marginTop","marginLeft","_id"],"mappings":";;;;;;AAAA,OAAOA,MAAP,MAAmB,yBAAnB;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,SAAQC,IAAR,QAAmB,MAAnB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAAQC,QAAR,EAAmBC,SAAnB,QAAmC,OAAnC;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,OAAU;AAAA;;AAAA,MAARC,IAAQ,QAARA,IAAQ;AACtB,MAAMC,MAAM,GAAGR,SAAS,EAAxB;;AADsB,kBAEOC,QAAQ,EAFf;AAAA,MAEfQ,OAFe;AAAA,MAEPC,UAFO;;AAAA,mBAGGT,QAAQ,EAHX;AAAA,MAGfU,MAHe;AAAA,MAGRC,OAHQ;;AAAA,mBAIOX,QAAQ,CAAC,IAAD,CAJf;AAAA,MAIfY,OAJe;AAAA,MAIPC,UAJO;;AAMtBZ,EAAAA,SAAS,CAAC,YAAI;AACV,QAAMa,KAAK,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,CAAd;AACAf,IAAAA,GAAG,CAACgB,MAAJ,CAAWJ,KAAX,EAAiB,QAAjB,EAA0B,UAAUK,GAAV,EAAgBC,OAAhB,EAAyB;AAC/C,UAAI,CAACD,GAAL,EAAU;AACNR,QAAAA,OAAO,CAACS,OAAO,CAACC,MAAT,CAAP;AACAR,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH,OAHD,MAIA;AACIS,QAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACA,YAAMK,QAAQ,GAAG,6CAA2CT,MAAM,CAACS,QAAP,CAAgBC,IAA5E;AACAV,QAAAA,MAAM,CAACS,QAAP,CAAgBE,OAAhB,CAAwBF,QAAxB;AACH;AACJ,KAVD;AAYH,GAdQ,EAcP,EAdO,CAAT;;AAeA,MAAIjB,MAAM,CAACoB,UAAX,EAAuB;AACnB,WACI,4BACI,MAAC,IAAD;AAAM,MAAA,KAAK,EAAC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,QAAQ,EAAG,OAAZ;AAAoBC,QAAAA,GAAG,EAAG,KAA1B;AAAgCC,QAAAA,IAAI,EAAC,KAArC;AAA2CC,QAAAA,SAAS,EAAE,OAAtD;AAA8DC,QAAAA,UAAU,EAAC;AAAzE,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,IAAD;AAAM,MAAA,IAAI,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFJ,CADJ;AASH,GAVD,MAUK;AACDvB,IAAAA,UAAU,CAACH,IAAI,CAACE,OAAL,CAAa,CAAb,CAAD,CAAV;AACA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACSE,MAAM,KAAKF,OAAO,CAACyB,GAAnB,IACG,MAAC,SAAD;AAAW,MAAA,OAAO,EAAEzB,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFZ,EAISE,MAAM,KAAKF,OAAO,CAACyB,GAAnB,IACG,MAAC,aAAD;AAAe,MAAA,OAAO,EAAEzB,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALZ,CADJ;AAUH;AAEJ,CA7CD;;GAAMH,O;UACaN,S;;;KADbM,O;;AA4EN,eAAeA,OAAf","sourcesContent":["import Header from '../../components/header';\r\nimport Head from '../../components/head';\r\nimport {Spin} from 'antd';\r\nimport { useRouter } from 'next/router';\r\nimport {useState , useEffect} from 'react';\r\nimport jwt from 'jsonwebtoken';\r\nimport MyProfile from './Components/myProfile';\r\nimport PublicProfile from './Components/publicProfile';\r\n\r\nconst Profile = ({data})=>{\r\n    const router = useRouter();\r\n    const [profile,setprofile] = useState();\r\n    const [userid,setData] = useState();\r\n    const [loading,setLoading] = useState(true);\r\n\r\n    useEffect(()=>{\r\n        const token = window.localStorage.getItem(\"Tokens\");\r\n        jwt.verify(token,\"secret\",function (err , decoded) {\r\n            if (!err) {\r\n                setData(decoded.userId);\r\n                setLoading(false);\r\n            }else\r\n            {\r\n                console.log(err);\r\n                const location = \"/Auth/Signin/?ref=tokenexpired&location=\"+window.location.href;\r\n                window.location.replace(location);\r\n            }\r\n        });\r\n        \r\n    },[])\r\n    if (router.isFallback) {\r\n        return (\r\n            <>\r\n                <Head title=\"Loading\"/>\r\n                <div style={{position : 'fixed',top : '50%',left:'50%',marginTop :'-50px',marginLeft:'-50px'}}>\r\n                    <Spin size=\"large\" />\r\n                </div>\r\n                \r\n            </>\r\n        )\r\n    }else{\r\n        setprofile(data.profile[0]);\r\n        return(\r\n            <div>\r\n                    {userid === profile._id &&(\r\n                        <MyProfile profile={profile}/>\r\n                    )}\r\n                    {userid !== profile._id &&(\r\n                        <PublicProfile profile={profile}/>\r\n                    )}\r\n            </div>\r\n        )        \r\n    }\r\n    \r\n}\r\n\r\n\r\nexport async function getStaticPaths(){\r\n    // const res = await fetch(\"http://localhost:9000/profiles/\");\r\n    // const data = await res.json();\r\n    var paths = [];\r\n    // data.response.profiles.map(profile=>{\r\n    //     paths.push({params : {\r\n    //         _id : profile._id\r\n    //     }})\r\n    // })\r\n    \r\n    return{\r\n        paths ,\r\n        fallback : true\r\n    }\r\n}\r\nexport async function getStaticProps({ params }){\r\n\r\n    const url = \"http://localhost:9000/profiles/profile?userid=\"+params._id ;\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n    return{\r\n       props : {\r\n           data\r\n       }\r\n    }\r\n}\r\n\r\n\r\nexport default Profile ;"]},"metadata":{},"sourceType":"module"}