{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Noumane agouzil\\\\Desktop\\\\Normane\\\\My projects\\\\PfeProject\\\\Front-End\\\\pages\\\\Search\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport Header from '../../components/header';\nimport Head from '../../components/head';\nimport './Scss/search.scss';\nimport { useRouter } from 'next/router'; // ------------------------------------------------\n\nimport SearchCard from '../../components/SearchCard';\nimport SearchBar from '../../components/SearchBar'; //--------------------------------------------------\n\nvar Search = function Search(_ref) {\n  _s();\n\n  var props = _ref.props,\n      qu = _ref.qu;\n\n  var _useState = useState(),\n      profiles = _useState[0],\n      setProfile = _useState[1];\n\n  var router = useRouter();\n  useEffect(function () {\n    console.log(props.profile);\n    setProfile(props.profile);\n  });\n\n  var handleCLick = function handleCLick() {\n    if (+qu.page < Math.round(props.count / 9) && +qu.page !== 0) {\n      var newPage = +qu.page + 1;\n      router.push('/Search?companyname=' + qu.companyname + '&domaine=' + qu.domaine + '&city=' + qu.city + '&page=' + newPage);\n    }\n  };\n\n  var handleBack = function handleBack() {\n    var newPage = +qu.page - 1;\n    router.push('/Search?companyname=' + qu.companyname + '&domaine=' + qu.domaine + '&city=' + qu.city + '&page=' + newPage);\n  };\n\n  return __jsx(\"div\", {\n    className: \"body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    title: \"Resulat de recherche | 6 solutions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 14\n    }\n  }), __jsx(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 14\n    }\n  }), __jsx(\"div\", {\n    className: \"searchPage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 14\n    }\n  }, __jsx(SearchBar, {\n    searchItem: qu,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: \"CardContainer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 14\n    }\n  }, profiles !== undefined && __jsx(React.Fragment, null, profiles.map(function (profile) {\n    return __jsx(React.Fragment, null, __jsx(SearchCard, {\n      key: profile._id,\n      className: \"Card1\",\n      profile: profile,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 33\n      }\n    }));\n  }))), __jsx(\"div\", {\n    className: \"pagination\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 14\n    }\n  }, __jsx(\"button\", {\n    className: qu.page <= 1 || props.count === undefined ? \"disabled test\" : \"backPage test\",\n    onClick: handleBack,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }, \"Pr\\xE9c\\xE9dent\"), props.count !== undefined && __jsx(\"span\", {\n    className: \"pageNumber test \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 51\n    }\n  }, qu.page, \" sur \", Math.round(props.count / 9) !== 0 ? Math.round(props.count / 9) : 1), props.count === undefined && __jsx(\"span\", {\n    className: \"pageNumber test \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 51\n    }\n  }, \"-\"), __jsx(\"button\", {\n    className: qu.page >= Math.round(props.count / 9) || props.count === undefined ? \"disabled test \" : \"nextPage test \",\n    onClick: handleCLick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, \"Suivant\")));\n};\n\n_s(Search, \"JhuWeGinBQoBoS8B7IKfLM7QfbI=\", false, function () {\n  return [useRouter];\n});\n\n_c = Search;\n\nSearch.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n    var query, data, Url, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            query = _ref2.query;\n            data = '';\n            Url = 'http://localhost:9000/profiles/search?companyname=' + query.companyname + '&domaine=' + query.domaine + '&city=' + query.city + '&page=' + query.page;\n            _context.prev = 3;\n            _context.next = 6;\n            return fetch(Url);\n\n          case 6:\n            res = _context.sent;\n            _context.next = 9;\n            return res.json();\n\n          case 9:\n            data = _context.sent;\n            _context.next = 16;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](3);\n            console.log(_context.t0);\n            data = \"\";\n\n          case 16:\n            return _context.abrupt(\"return\", {\n              props: data,\n              qu: query\n            });\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3, 12]]);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/Front-End/pages/Search/index.js"],"names":["useEffect","useState","Header","Head","useRouter","SearchCard","SearchBar","Search","props","qu","profiles","setProfile","router","console","log","profile","handleCLick","page","Math","round","count","newPage","push","companyname","domaine","city","handleBack","undefined","map","_id","getInitialProps","query","data","Url","fetch","res","json"],"mappings":"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","sourcesContent":["import {useEffect , useState} from 'react';\r\nimport Header from '../../components/header';\r\nimport Head from '../../components/head';\r\nimport './Scss/search.scss';\r\nimport { useRouter } from 'next/router'\r\n// ------------------------------------------------\r\n\r\nimport SearchCard from '../../components/SearchCard';\r\nimport SearchBar from '../../components/SearchBar';\r\n//--------------------------------------------------\r\nconst Search =({props ,qu})=>{\r\n\r\n    const [profiles , setProfile] = useState();\r\n    const router = useRouter()\r\n    useEffect(()=>{\r\n        console.log(props.profile);\r\n        setProfile(props.profile);\r\n    })\r\n\r\n    const handleCLick = ()=>{\r\n        if (+qu.page < Math.round(props.count /9) && +qu.page !== 0  ) {\r\n            var newPage = +qu.page+1\r\n            router.push('/Search?companyname='+qu.companyname+'&domaine='+qu.domaine+'&city='+qu.city+'&page='+newPage)\r\n        }\r\n        \r\n    }\r\n    const handleBack = ()=>{\r\n        var newPage = +qu.page-1\r\n        router.push('/Search?companyname='+qu.companyname+'&domaine='+qu.domaine+'&city='+qu.city+'&page='+newPage)\r\n    }\r\n    return(\r\n        <div className=\"body\">\r\n             <Head title=\"Resulat de recherche | 6 solutions\" />\r\n             <Header />\r\n             <div className=\"searchPage\">\r\n                <SearchBar searchItem={qu}/>\r\n             </div>\r\n             \r\n             <div className=\"CardContainer\">\r\n                    {profiles !== undefined && (\r\n                        <>\r\n                        {profiles.map(profile=>(\r\n                                <>\r\n                                <SearchCard key={profile._id} className=\"Card1\" profile={profile}/>\r\n                                </>\r\n                        ))}\r\n                        </>\r\n                    )}\r\n                    \r\n             </div>\r\n\r\n             <div className=\"pagination\">\r\n                    <button className={qu.page <=1 || props.count === undefined  ? \"disabled test\" : \"backPage test\"} onClick={handleBack}>Précédent</button>\r\n                    {props.count !== undefined &&(<span className=\"pageNumber test \">{qu.page} sur {Math.round(props.count /9) !== 0  ? Math.round(props.count /9) : 1 }</span>)}\r\n                    {props.count === undefined &&(<span className=\"pageNumber test \">-</span>)}\r\n                    <button className={qu.page >= Math.round(props.count / 9) || props.count === undefined ? \"disabled test \" : \"nextPage test \" } onClick={handleCLick}>Suivant</button>\r\n             </div>\r\n             \r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nSearch.getInitialProps = async ({ query }) => {\r\n    var data = '';\r\n    const Url = 'http://localhost:9000/profiles/search?companyname='+query.companyname+'&domaine='+query.domaine+'&city='+query.city+'&page='+query.page  ;\r\n    try {\r\n      const res = await fetch(Url)  ;\r\n      data = await res.json();\r\n    } catch (error) {\r\n        console.log(error);\r\n        data = \"\";\r\n    }\r\n     return {props : data , qu : query}\r\n}\r\n\r\nexport default Search ;"]},"metadata":{},"sourceType":"module"}