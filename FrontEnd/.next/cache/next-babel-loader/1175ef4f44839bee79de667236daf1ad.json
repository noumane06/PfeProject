{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from '../../components/head';\nimport Header from '../../components/header';\nimport { useState, useEffect, forwardRef } from 'react';\nimport { Spin } from 'antd';\nimport PublicProfile from '../../components/Profile_Components/publicProfile';\nimport ErrorPage from 'next/error';\nimport Footer from '../../components/footer';\n\nvar Profile = function Profile(props) {\n  _s();\n\n  var _useState = useState(),\n      userid = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  useEffect(function () {\n    if (props.statusCode === 401) {\n      var location = \"/Auth/Signin/?ref=tokenexpired&location=\" + window.location.href;\n      window.location.replace(location);\n    } else {\n      props.statusCode !== 404 ? setData(props.data.AuthId.userId) : \"\";\n      setLoading(false);\n    }\n  }, []);\n\n  if (props.statusCode === 404) {\n    return __jsx(ErrorPage, {\n      statusCode: props.statusCode\n    });\n  }\n\n  if (loading) {\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      title: \"Loading\"\n    }), __jsx(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        marginTop: '-50px',\n        marginLeft: '-50px'\n      }\n    }, __jsx(Spin, {\n      size: \"large\"\n    })));\n  } else {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"body\"\n    }, __jsx(\"div\", {\n      className: \"ContentInside\"\n    }, __jsx(Header, null), props.data === undefined ? __jsx(Head, {\n      title: \"Loading\"\n    }) : '', __jsx(\"div\", {\n      style: {\n        marginTop: '8%'\n      }\n    }, props.data !== undefined && __jsx(PublicProfile, {\n      profile: props.data.profile,\n      userid: userid\n    })))), __jsx(Footer, null));\n  }\n};\n\n_s(Profile, \"xPJEkg/h7ATkKCt8P2PiHM9QF0U=\");\n\n_c = Profile;\nexport var __N_SSP = true;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/FrontEnd/pages/Profiles/[_id].jsx"],"names":["Head","Header","useState","useEffect","forwardRef","Spin","PublicProfile","ErrorPage","Footer","Profile","props","userid","setData","loading","setLoading","statusCode","location","window","href","replace","data","AuthId","userId","position","top","left","marginTop","marginLeft","undefined","profile"],"mappings":";;;;AAAA,OAAOA,IAAP,MAAiB,uBAAjB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,SAAQC,QAAR,EAAmBC,SAAnB,EAA8BC,UAA9B,QAA+C,OAA/C;AACA,SAAQC,IAAR,QAAoB,MAApB;AACA,OAAOC,aAAP,MAA0B,mDAA1B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAS;AAAA;;AAAA,kBAEIR,QAAQ,EAFZ;AAAA,MAEdS,MAFc;AAAA,MAEPC,OAFO;;AAAA,mBAGQV,QAAQ,CAAC,IAAD,CAHhB;AAAA,MAGdW,OAHc;AAAA,MAGNC,UAHM;;AAIrBX,EAAAA,SAAS,CAAC,YAAI;AACV,QAAIO,KAAK,CAACK,UAAN,KAAqB,GAAzB,EAA8B;AAC1B,UAAMC,QAAQ,GAAG,6CAA2CC,MAAM,CAACD,QAAP,CAAgBE,IAA5E;AACAD,MAAAA,MAAM,CAACD,QAAP,CAAgBG,OAAhB,CAAwBH,QAAxB;AACH,KAHD,MAGK;AACDN,MAAAA,KAAK,CAACK,UAAN,KAAqB,GAArB,GAA2BH,OAAO,CAACF,KAAK,CAACU,IAAN,CAAWC,MAAX,CAAkBC,MAAnB,CAAlC,GAA+D,EAA/D;AACAR,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,GARQ,EAQP,EARO,CAAT;;AASA,MAAIJ,KAAK,CAACK,UAAN,KAAqB,GAAzB,EAA8B;AAC1B,WAAO,MAAC,SAAD;AAAW,MAAA,UAAU,EAAEL,KAAK,CAACK;AAA7B,MAAP;AACH;;AACD,MAAIF,OAAJ,EAAc;AAEV,WACA,4BACQ,MAAC,IAAD;AAAM,MAAA,KAAK,EAAC;AAAZ,MADR,EAEQ;AAAK,MAAA,KAAK,EAAE;AAACU,QAAAA,QAAQ,EAAG,OAAZ;AAAoBC,QAAAA,GAAG,EAAG,KAA1B;AAAgCC,QAAAA,IAAI,EAAC,KAArC;AAA2CC,QAAAA,SAAS,EAAE,OAAtD;AAA8DC,QAAAA,UAAU,EAAC;AAAzE;AAAZ,OACI,MAAC,IAAD;AAAM,MAAA,IAAI,EAAC;AAAX,MADJ,CAFR,CADA;AAQH,GAVD,MAUK;AACD,WACI,4BACI;AAAK,MAAA,SAAS,EAAC;AAAf,OACI;AAAK,MAAA,SAAS,EAAC;AAAf,OACI,MAAC,MAAD,OADJ,EAEKjB,KAAK,CAACU,IAAN,KAAeQ,SAAf,GAA2B,MAAC,IAAD;AAAM,MAAA,KAAK,EAAC;AAAZ,MAA3B,GAAoD,EAFzD,EAGI;AAAK,MAAA,KAAK,EAAE;AAACF,QAAAA,SAAS,EAAE;AAAZ;AAAZ,OACMhB,KAAK,CAACU,IAAN,KAAeQ,SAAf,IACE,MAAC,aAAD;AAAe,MAAA,OAAO,EAAElB,KAAK,CAACU,IAAN,CAAWS,OAAnC;AAA4C,MAAA,MAAM,EAAElB;AAApD,MAFR,CAHJ,CADJ,CADJ,EAYI,MAAC,MAAD,OAZJ,CADJ;AAiBH;AAEJ,CA9CD;;GAAMF,O;;KAAAA,O;;AAwEN,eAAeA,OAAf","sourcesContent":["import Head from '../../components/head';\r\nimport Header from '../../components/header'\r\nimport {useState , useEffect, forwardRef} from 'react';\r\nimport {Spin } from 'antd';\r\nimport PublicProfile from '../../components/Profile_Components/publicProfile';\r\nimport ErrorPage from 'next/error';\r\nimport Footer from '../../components/footer';\r\nconst Profile = (props)=>{\r\n\r\n    const [userid,setData] = useState();\r\n    const [loading,setLoading] = useState(true);\r\n    useEffect(()=>{\r\n        if (props.statusCode === 401) {\r\n            const location = \"/Auth/Signin/?ref=tokenexpired&location=\"+window.location.href;\r\n            window.location.replace(location);\r\n        }else{\r\n            props.statusCode !== 404 ? setData(props.data.AuthId.userId) : \"\";\r\n            setLoading(false);\r\n        }\r\n    },[])\r\n    if (props.statusCode === 404) {\r\n        return <ErrorPage statusCode={props.statusCode} />\r\n    }\r\n    if (loading ) {\r\n        \r\n        return(\r\n        <>\r\n                <Head title=\"Loading\"/>\r\n                <div style={{position : 'fixed',top : '50%',left:'50%',marginTop :'-50px',marginLeft:'-50px'}}>\r\n                    <Spin size=\"large\" />\r\n                </div>\r\n        </>\r\n        )\r\n    }else{\r\n        return(\r\n            <>\r\n                <div className=\"body\">\r\n                    <div className=\"ContentInside\">\r\n                        <Header/>\r\n                        {props.data === undefined ? <Head title=\"Loading\"/> :''}\r\n                        <div style={{marginTop :'8%'}}>\r\n                            { props.data !== undefined && (\r\n                                <PublicProfile profile={props.data.profile} userid={userid} />\r\n                            )}  \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <Footer />\r\n            </>\r\n            \r\n        )        \r\n    }\r\n    \r\n}\r\n\r\n\r\nexport const getServerSideProps = async (ctx) => {\r\n    try {\r\n        const cookie = ctx.req.headers.cookie ;\r\n        const url = \"/api/profiles/profile?userid=\"+ctx.query._id ;\r\n        const res = await fetch( url,{headers : {cookie}}); \r\n        const statusCode = res.status;\r\n        const data = await res.json();\r\n        \r\n        if (statusCode !== 200) {\r\n            throw statusCode \r\n        }\r\n        return  {\r\n            props : {data }\r\n        }\r\n    } \r\n    catch (error) {\r\n        ctx.res.statusCode = error;\r\n        return {\r\n               props : {statusCode : error}\r\n        };\r\n    }   \r\n  }\r\n\r\nexport default Profile ;"]},"metadata":{},"sourceType":"module"}