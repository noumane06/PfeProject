{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Noumane agouzil\\\\Desktop\\\\Normane\\\\My projects\\\\PfeProject\\\\Front-End\\\\pages\\\\Profiles\\\\index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Header from '../../components/header';\nimport Head from '../../components/head';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport jwt from 'jsonwebtoken';\n\nconst Profile = () => {\n  const {\n    0: data,\n    1: setData\n  } = useState();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  useEffect(() => {\n    const token = window.localStorage.getItem(\"Tokens\");\n    jwt.verify(token, \"secret\", function (err, decoded) {\n      if (!err) {\n        const auth = \"Bearer \" + token;\n        var url = \"http://localhost:9000/profiles/myprofile?userid=\" + decoded.userId;\n        axios.get(url, {\n          headers: {\n            'Authorization': auth\n          }\n        }).then(res => {\n          setData(res.data.profile); //console.log(res.data.profile)\n\n          setLoading(false);\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    });\n  }, []);\n\n  if (loading) {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }\n    }, __jsx(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }\n    }), __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }\n    }), \"LOADING ...\");\n  } else {\n    const Message = \"Bonjour \" + data.nom + \" \" + data.prenom + \" , Votre email est : \" + data.email;\n    return __jsx(\"div\", {\n      className: \"body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }\n    }, __jsx(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }), __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }), __jsx(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }\n    }, Message));\n  }\n};\n\nexport default Profile;","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/Front-End/pages/Profiles/index.js"],"names":["Header","Head","axios","useEffect","useState","jwt","Profile","data","setData","loading","setLoading","token","window","localStorage","getItem","verify","err","decoded","auth","url","userId","get","headers","then","res","profile","catch","error","console","log","Message","nom","prenom","email"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,yBAAnB;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,EAAoBC,QAApB,QAAmC,OAAnC;AACA,OAAOC,GAAP,MAAgB,cAAhB;;AAGA,MAAMC,OAAO,GAAG,MAAI;AAEhB,QAAM;AAAA,OAACC,IAAD;AAAA,OAAMC;AAAN,MAAiBJ,QAAQ,EAA/B;AACA,QAAM;AAAA,OAACK,OAAD;AAAA,OAASC;AAAT,MAAuBN,QAAQ,CAAC,IAAD,CAArC;AAEAD,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMQ,KAAK,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,CAAd;AACAT,IAAAA,GAAG,CAACU,MAAJ,CAAWJ,KAAX,EAAiB,QAAjB,EAA0B,UAAUK,GAAV,EAAgBC,OAAhB,EAAyB;AAC/C,UAAI,CAACD,GAAL,EAAU;AACN,cAAME,IAAI,GAAG,YAAUP,KAAvB;AACA,YAAIQ,GAAG,GAAG,qDAAmDF,OAAO,CAACG,MAArE;AACAlB,QAAAA,KAAK,CAACmB,GAAN,CAAUF,GAAV,EAAc;AACVG,UAAAA,OAAO,EAAE;AACP,6BAAiBJ;AADV;AADC,SAAd,EAKCK,IALD,CAKMC,GAAG,IAAE;AACPhB,UAAAA,OAAO,CAACgB,GAAG,CAACjB,IAAJ,CAASkB,OAAV,CAAP,CADO,CAEP;;AACAf,UAAAA,UAAU,CAAC,KAAD,CAAV;AACH,SATD,EAUCgB,KAVD,CAUOC,KAAK,IAAG;AACXC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,SAZD;AAaH;AACJ,KAlBD;AAoBH,GAtBQ,EAsBP,EAtBO,CAAT;;AAuBA,MAAIlB,OAAJ,EAAa;AACT,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,gBADJ;AAOH,GARD,MAQK;AACD,UAAMqB,OAAO,GAAG,aAAWvB,IAAI,CAACwB,GAAhB,GAAoB,GAApB,GAAwBxB,IAAI,CAACyB,MAA7B,GAAoC,uBAApC,GAA4DzB,IAAI,CAAC0B,KAAjF;AACA,WACA;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKH,OAAL,CAHJ,CADA;AAOH;AAEJ,CA/CD;;AAiDA,eAAexB,OAAf","sourcesContent":["import Header from '../../components/header';\r\nimport Head from '../../components/head';\r\nimport axios from 'axios'; \r\nimport {useEffect , useState} from 'react'\r\nimport jwt from 'jsonwebtoken';\r\n\r\n\r\nconst Profile = ()=>{\r\n\r\n    const [data,setData] = useState();\r\n    const [loading,setLoading] = useState(true);\r\n\r\n    useEffect(()=>{\r\n        const token = window.localStorage.getItem(\"Tokens\");\r\n        jwt.verify(token,\"secret\",function (err , decoded) {\r\n            if (!err) {\r\n                const auth = \"Bearer \"+token ;\r\n                var url = \"http://localhost:9000/profiles/myprofile?userid=\"+decoded.userId ;\r\n                axios.get(url,{\r\n                    headers: {\r\n                      'Authorization': auth\r\n                    }\r\n                  })\r\n                .then(res=>{\r\n                    setData(res.data.profile)\r\n                    //console.log(res.data.profile)\r\n                    setLoading(false);\r\n                })\r\n                .catch(error =>{\r\n                    console.log(error);\r\n                })\r\n            }\r\n        });\r\n        \r\n    },[])\r\n    if (loading) {\r\n        return(\r\n            <div>\r\n                <Header/>\r\n                <Head/>\r\n                LOADING ...\r\n            </div>\r\n        )\r\n    }else{\r\n        const Message = \"Bonjour \"+data.nom+\" \"+data.prenom+\" , Votre email est : \"+data.email ;\r\n        return(\r\n        <div className=\"body\">\r\n            <Header/>\r\n            <Head/>\r\n            <h1>{Message}</h1>\r\n        </div>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\nexport default Profile ;"]},"metadata":{},"sourceType":"module"}