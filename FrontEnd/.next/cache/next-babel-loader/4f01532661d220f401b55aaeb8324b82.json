{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Noumane agouzil\\\\Desktop\\\\Normane\\\\My projects\\\\PfeProject\\\\Front-End\\\\pages\\\\Search\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport Header from '../../components/header';\nimport Head from '../../components/head';\nimport './Scss/search.scss';\nimport { useRouter } from 'next/router';\nimport { Skeleton } from 'antd';\nimport axios from 'axios'; // ------------------------------------------------\n\nimport SearchCard from '../../components/SearchCard';\nimport SearchBar from '../../components/SearchBar'; //--------------------------------------------------\n\nvar Search = function Search(_ref) {\n  _s();\n\n  var qu = _ref.qu;\n\n  var _useState = useState(null),\n      profiles = _useState[0],\n      setProfile = _useState[1];\n\n  var _useState2 = useState(false),\n      nodata = _useState2[0],\n      setnodata = _useState2[1];\n\n  var _useState3 = useState(true),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  var router = useRouter();\n  useEffect(function () {\n    var Url = 'http://localhost:9000/profiles/search?companyname=' + qu.companyname + '&domaine=' + qu.domaine + '&city=' + qu.city + '&page=' + qu.page;\n    axios.get(Url).then(function (res) {\n      setProfile(res.data);\n\n      if (res.data === \"\") {\n        setnodata(true);\n        setLoading(false);\n      } else {\n        setnodata(false);\n      }\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  }, []);\n\n  var handleCLick = function handleCLick() {\n    setLoading(true);\n\n    if (+qu.page < Math.round(props.count / 9) && +qu.page !== 0) {\n      var newPage = +qu.page + 1;\n      router.push('/Search?companyname=' + qu.companyname + '&domaine=' + qu.domaine + '&city=' + qu.city + '&page=' + newPage);\n    }\n  };\n\n  var handleBack = function handleBack() {\n    setLoading(true);\n    var newPage = +qu.page - 1;\n    router.push('/Search?companyname=' + qu.companyname + '&domaine=' + qu.domaine + '&city=' + qu.city + '&page=' + newPage);\n  };\n\n  return __jsx(\"div\", {\n    className: \"body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    title: \"Resulat de recherche | 6 solutions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 14\n    }\n  }), __jsx(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 14\n    }\n  }), __jsx(\"div\", {\n    className: \"searchPage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 14\n    }\n  }, __jsx(SearchBar, {\n    searchItem: qu,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  })), __jsx(Skeleton, {\n    loading: loading,\n    active: true,\n    avatar: true,\n    round: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 14\n    }\n  }, profiles !== undefined && profiles !== null && __jsx(React.Fragment, null, !nodata && __jsx(\"div\", {\n    className: \"CardContainer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 28\n    }\n  }, profiles.profile.map(function (profile) {\n    return __jsx(React.Fragment, null, __jsx(SearchCard, {\n      key: profile._id,\n      className: \"Card1\",\n      profile: profile,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 41\n      }\n    }));\n  })), nodata && __jsx(\"div\", {\n    className: \"Noresults\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 25\n    }\n  }, __jsx(\"img\", {\n    src: \"/static/Assets/No_comments.png\",\n    height: \"300\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 33\n    }\n  }), __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 33\n    }\n  }, \"Aucun r\\xE9sultat trouv\\xE9\"), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 33\n    }\n  }, \"Il semble que nous ne trouvons aucun r\\xE9sultat bas\\xE9 sur la recherche.\")), __jsx(\"div\", {\n    className: \"pagination\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, __jsx(\"button\", {\n    className: qu.page <= 1 || profiles.count === undefined ? \"disabled test\" : \"backPage test\",\n    onClick: handleBack,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }, \"Pr\\xE9c\\xE9dent\"), profiles.count !== undefined && __jsx(\"span\", {\n    className: \"pageNumber test \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 66\n    }\n  }, qu.page, \" sur \", Math.round(profiles.count / 9) !== 0 ? Math.round(profiles.count / 9) : 1), profiles.count === undefined && __jsx(\"span\", {\n    className: \"pageNumber test \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 66\n    }\n  }, \"-\"), __jsx(\"button\", {\n    className: qu.page >= Math.round(profiles.count / 9) || profiles.count === undefined ? \"disabled test \" : \"nextPage test \",\n    onClick: handleCLick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 33\n    }\n  }, \"Suivant\")))));\n};\n\n_s(Search, \"uJpL+7T7B3LUr4tqum3v6tJHdH8=\", false, function () {\n  return [useRouter];\n});\n\n_c = Search;\n\nSearch.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n    var query;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            query = _ref2.query;\n            return _context.abrupt(\"return\", {\n              props: [{\n                test: \"this is a test\"\n              }],\n              qu: query\n            });\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["C:/Users/Noumane agouzil/Desktop/Normane/My projects/PfeProject/Front-End/pages/Search/index.js"],"names":["useEffect","useState","Header","Head","useRouter","Skeleton","axios","SearchCard","SearchBar","Search","qu","profiles","setProfile","nodata","setnodata","loading","setLoading","router","Url","companyname","domaine","city","page","get","then","res","data","err","console","log","handleCLick","Math","round","props","count","newPage","push","handleBack","undefined","profile","map","_id","getInitialProps","query","test"],"mappings":"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","sourcesContent":["import {useEffect , useState} from 'react';\r\nimport Header from '../../components/header';\r\nimport Head from '../../components/head';\r\nimport './Scss/search.scss';\r\nimport { useRouter } from 'next/router';\r\nimport { Skeleton } from 'antd';\r\nimport axios from 'axios';\r\n// ------------------------------------------------\r\n\r\nimport SearchCard from '../../components/SearchCard';\r\nimport SearchBar from '../../components/SearchBar';\r\n//--------------------------------------------------\r\nconst Search =({ qu})=>{\r\n\r\n    const [profiles , setProfile] = useState(null);\r\n    const [nodata ,setnodata] = useState(false);\r\n    const [loading ,setLoading] = useState(true);\r\n    const router = useRouter()\r\n    useEffect(()=>{\r\n       \r\n        \r\n        const Url = 'http://localhost:9000/profiles/search?companyname='+qu.companyname+'&domaine='+qu.domaine+'&city='+qu.city+'&page='+qu.page  ;\r\n        axios.get(Url)\r\n        .then(res =>{\r\n            setProfile(res.data);\r\n            if (res.data ===\"\") {\r\n                setnodata(true);\r\n                setLoading(false);\r\n            }else\r\n            {\r\n                setnodata(false);\r\n            }\r\n        } )\r\n        .catch(err => console.log(err));\r\n    },[])\r\n\r\n    const handleCLick = ()=>{\r\n        setLoading(true);\r\n        if (+qu.page < Math.round(props.count /9) && +qu.page !== 0  ) {\r\n            var newPage = +qu.page+1\r\n            router.push('/Search?companyname='+qu.companyname+'&domaine='+qu.domaine+'&city='+qu.city+'&page='+newPage)\r\n        }\r\n        \r\n    }\r\n    const handleBack = ()=>{\r\n        setLoading(true);\r\n        var newPage = +qu.page-1\r\n        router.push('/Search?companyname='+qu.companyname+'&domaine='+qu.domaine+'&city='+qu.city+'&page='+newPage)\r\n    }\r\n    return(\r\n        <div className=\"body\">\r\n             <Head title=\"Resulat de recherche | 6 solutions\" />\r\n             <Header />\r\n             <div className=\"searchPage\">\r\n                <SearchBar searchItem={qu}/>\r\n             </div>\r\n             <Skeleton loading={loading} active={true} avatar={true} round ={true}>\r\n                {profiles !== undefined && profiles !== null &&(\r\n                    <>\r\n                        {!nodata &&(\r\n                           <div className=\"CardContainer\">    \r\n                                {profiles.profile.map(profile=>(\r\n                                        <>\r\n                                        <SearchCard key={profile._id} className=\"Card1\" profile={profile}/>\r\n                                        </>\r\n                                ))}\r\n                            </div> \r\n                        )}\r\n                        \r\n                        {nodata  &&(\r\n                        <div className=\"Noresults\">\r\n                                <img src=\"/static/Assets/No_comments.png\" height=\"300\"/>\r\n                                <h2>Aucun résultat trouvé</h2>\r\n                                <p>Il semble que nous ne trouvons aucun résultat basé sur la recherche.</p>\r\n                        </div>\r\n                        )}\r\n\r\n                        <div className=\"pagination\">\r\n                                <button className={qu.page <=1 || profiles.count === undefined  ? \"disabled test\" : \"backPage test\"} onClick={handleBack}>Précédent</button>\r\n                                {profiles.count !== undefined &&(<span className=\"pageNumber test \">{qu.page} sur {Math.round(profiles.count /9) !== 0  ? Math.round(profiles.count /9) : 1 }</span>)}\r\n                                {profiles.count === undefined &&(<span className=\"pageNumber test \">-</span>)}\r\n                                <button className={qu.page >= Math.round(profiles.count / 9) || profiles.count === undefined ? \"disabled test \" : \"nextPage test \" } onClick={handleCLick}>Suivant</button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n             </Skeleton>\r\n             \r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nSearch.getInitialProps = async ({ query }) => {\r\n    \r\n    return {props : [{test : \"this is a test\"}] , qu : query}\r\n}\r\n\r\nexport default Search ;"]},"metadata":{},"sourceType":"module"}