{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[52],{RoEL:function(e,t,n){\"use strict\";n.r(t);var r=n(\"o0o1\"),a=n.n(r),o=n(\"rePB\"),i=n(\"HaE+\"),s=n(\"q1tI\"),u=n.n(s),l=n(\"sVM9\"),c=n.n(l),d=n(\"wd/R\"),f=n.n(d),p=n(\"TeRw\"),b=n(\"2/Rp\"),m=n(\"vDqi\"),v=n.n(m),g=u.a.createElement;function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){var t=e.day,n=e.hour,r=e.setTitle,a=e.setvisible,o=function(e,t){var n=new Date(e),r=new Date,a=n.getMonth()+n.getDate()+n.getFullYear(),o=r.getMonth()+r.getDate()+r.getFullYear();return 0===n.getDay()?1:n.getFullYear()>r.getFullYear()?-1:n.getFullYear()<r.getFullYear()?1:n.getMonth()>r.getMonth()?-1:o-a===0?r.getHours()-parseInt(t.split(\":\")[0]):o-a}(t,n);return g(u.a.Fragment,null,g(\"div\",o>=0?{className:\"Busy\",title:\"Date indisponible\"}:{onClick:function(){r(n+\" | \"+t),a(!0)},className:\"Free\"}))},D=function(e){var t=new Date(e);return[[\"Dimanche\",\"Lundi\",\"Mardi\",\"Mercredi\",\"Jeudi\",\"Vendredi\",\"Samedi\"][t.getDay()],t.getDate(),[\"Janvier\",\"F\\xe9vrier\",\"Mars\",\"Avril\",\"Mai\",\"Juin\",\"Juillet\",\"Aout\",\"Septembre\",\"Octobre\",\"Novembre\",\"Decembre\"][t.getMonth()+1]]},O=function(e,t,n){var r=e.Notification.filter((function(e){return e.day==n&&e.horraire==t}));return void 0!==r[0]?r[0].AcceptStatus:\"\"};t.default=function(e){var t=e.profile,n=t.horraire,r=void 0!==t.booked?t.booked:{},l=(new Date,f()(n[0],\"HH:mm\")),d=f()(n[1],\"HH:mm\"),m=60*(d.format(\"HH\")-l.format(\"HH\"))/45,h=function(e,t,n){for(var r=[],a=0;a<=parseInt(n);a++){var o=e.format(\"HH:mm\")+\"-\"+e.add(30,\"minutes\").format(\"HH:mm\");if(r.push(o),Math.abs(f.a.duration(e.diff(t)).asMinutes())<=30)break;e.add(15,\"minutes\")}return r}(l,d,m),j=Object(s.useState)(r!=={}?r:{\"\":\"\"}),k=j[0],M=j[1],N=Object(s.useState)(!1),S=N[0],H=N[1],P=Object(s.useState)(),Y=P[0],E=P[1],_=Object(s.useState)(\"\"),C=_[0],F=_[1],A=Object(s.useState)(!1),T=A[0],x=A[1],R=Object(s.useState)(0),B=R[0],J=R[1],q=new Date,I=[f()(Date.now()).add(7*B,\"days\").format(\"YYYY/MM/DD\")];q.setDate(q.getDate()+7*B);for(var L=0;L<6;L++)q.setDate(q.getDate()+1),I.push(f()(q).format(\"YYYY/MM/DD\"));var V=function(){var e=Object(i.a)(a.a.mark((function e(){var n,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==r[Y.split(\" | \")[1]]?r[Y.split(\" | \")[1]].push(Y.split(\" | \")[0]):(n=[Y.split(\" | \")[1]],i=Y.split(\" | \")[0],r=r==={\"\":\"\"}?Object(o.a)({},n[0],[i]):y(y({},r),{},Object(o.a)({},n[0],[i]))),x(!0),s={booked:r,Notification:{Type:\"Request\",Message:C,horraire:Y.split(\" | \")[0],day:Y.split(\" | \")[1]}},v.a.post(\"http://localhost:9000/profiles/bookmeeting?userid=\"+t._id,s,{withCredentials:!0}).then((function(e){M(r),p.a.success({message:\"Votre demande a \\xe9t\\xe9 envoy\\xe9e avec succ\\xe8s\",description:\"Nous vous informerons lorsque nous aurons une r\\xe9ponse\"}),setTimeout((function(){x(!1),H(!1),window.location.reload()}),2e3)})).catch((function(e){return console.log(e)}));case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(e){return f()(e).diff(f()(Date.now()),\"hours\")>-24&&f()(e).diff(f()(Date.now()),\"hours\")<=0};return g(u.a.Fragment,null,g(\"div\",{className:\"CalendarControllers\"},g(\"button\",{className:\"today\",onClick:function(){return J(0)}},\"Aujourd'hui\"),g(\"div\",{className:\"weeks\"},g(\"button\",{className:\"nextW\",onClick:function(){return J(B-1)}},\"Semaine pr\\xe9c\\xe9dente\"),g(\"button\",{className:\"prevW\",onClick:function(){return J(B+1)}},\"Prochaine semaine\"))),g(\"table\",{id:\"calendar\"},g(c.a,{title:Y,visible:S,width:\"50vw\",onCancel:function(){return H(!1)},bodyStyle:{height:\"100%\"},footer:[g(b.a,{disabled:!1,key:\"submit\",type:\"primary\",loading:T,style:{borderRadius:\"10px\",fontFamily:\"GlacialBold\"},onClick:V},\"Envoyer\")]},g(\"label\",{style:{color:\"#2a2a2a\",fontFamily:\"GlacialBold\",fontSize:\"16px\"}},\"Message\"),g(\"br\",null),g(\"textarea\",{className:\"textArea\",placeholder:\"D\\xe9crivez votre objectif de la r\\xe9union\",rows:\"4\",value:C,onChange:function(e){return F(e.target.value)}}),g(\"br\",null),g(\"br\",null)),g(\"thead\",null,g(\"tr\",null,g(\"th\",null),I.map((function(e){return g(\"th\",{key:e+Date.now(),style:z(e)?{color:\"#1a73e8\",textAlign:\"center\"}:{textAlign:\"center\"}},D(e)[0],\" \",g(\"br\",null),\" \",D(e)[1],\" \",D(e)[2],\" \")})))),g(\"tbody\",null,h.map((function(e){return g(\"tr\",{key:e+Date.now()},g(\"th\",null,e),I.map((function(n){return g(\"td\",{key:n+e},void 0!==k[n]&&(k[n].includes(e)?!0===O(t,e,n)?g(\"div\",{className:\"Booked\"},\"R\\xe9serv\\xe9e\"):!1===O(t,e,n)?g(w,{day:n,hour:e.toString(),setTitle:E,setvisible:H}):g(\"div\",{className:\"Pending\"},\"En attente\"):g(w,{day:n,hour:e.toString(),setTitle:E,setvisible:H})),void 0===k[n]&&g(w,{day:n,hour:e.toString(),setTitle:E,setvisible:H}))})))})))))}},Z4pA:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/Profiles/Components/Components/BookMeeting\",function(){return n(\"RoEL\")}])}},[[\"Z4pA\",0,1,13,2,3,4,5,6,8,14,10,18,20,21]]]);","extractedComments":[]}